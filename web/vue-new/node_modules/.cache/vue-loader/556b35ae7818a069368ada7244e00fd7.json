{"remainingRequest":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\src\\views\\sample\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\src\\views\\sample\\index.vue","mtime":1720529385513},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1702824123341},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\babel-loader\\lib\\index.js","mtime":1702824125233},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1702824123341},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\vue-loader\\lib\\index.js","mtime":1702824125775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZGF5IGZyb20gJ2RheWpzJw0KaW1wb3J0IHsgdGltZSB9IGZyb20gJ2VjaGFydHMnOw0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAnZWxlbWVudC11aScNCmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsNCi8vIGltcG9ydCBTdGF0aXN0aWMgZnJvbSAnZWxlbWVudC11aSc7DQovLyBWdWUudXNlKFN0YXRpc3RpYykNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZGlhbG9nRWRpdFZpc2libGV4OiBmYWxzZSwNCiAgICAgIE1ZU1FMRFJBVzoiU1FM55S75YOPIE15U1FMIiwNCiAgICAgIE9SQUNMRURSQVc6IlNRTOeUu+WDjyBPcmFjbGUiLA0KICAgICAgTVlTUUxBREFQVDoiTXlTUUzpgILphY0iLA0KICAgICAgT1JBQ0xFQURBUFQ6Ik9yYWNsZemAgumFjSIsDQogICAgICBUQVNLRklOQUw6IuW3suWujOaIkCIsDQogICAgICBUQVNLRVZBTEFURToi6K+E5Lyw5LitIiwNCiAgICAgIFRBU0tVTkRPOiLmnKrlvIDlp4siLA0KICAgICAgVEFTS1NUT1A6IuW3suWBnOatoiIsDQogICAgICBTUUxEUkFXREVMQVk6MTUwMDAsDQogICAgICBTUUxBREFQVERFTEFZOjE1MDAwLA0KICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICB1cGxvYWRVcmw6ICJodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL3VwbG9hZCIsDQogICAgICB1cGxvYWRUYXNrSUQ6IDEsDQogICAgICBzZWxlY3RSb3dJZDogbnVsbCwNCiAgICAgIHNlbGVjdFRhc2tJZDogbnVsbCwNCiAgICAgIGZpbGVMaXN0OiBbXSwNCiAgICAgIGN1clJvd0lkOiBudWxsLA0KICAgICAgYWxsVGFzazogMTAsDQogICAgICBjdWxpbmc6IDUsDQogICAgICBvdXRlZDogMiwNCiAgICAgIGZpbmlzaGVkOiA3LA0KICAgICAgbmV3U2V0OiB7DQogICAgICAgIGZvbGRlcjogIiINCiAgICAgIH0sDQogICAgICBxdWVyeVBhcmFtOiB7DQogICAgICAgIHBhZ2VzaXplOiAxMCwNCiAgICAgICAgcGFnZW51bTogMSwNCiAgICAgIH0sDQogICAgICBUYXNrcXVlcnlQYXJhbTogew0KICAgICAgICBwYWdlc2l6ZTogMTAsDQogICAgICAgIHBhZ2VudW06IDEsDQogICAgICB9LA0KICAgICAgcGFnaW5hdGlvbjogew0KICAgICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgICAgcGFnZVNpemVPcHRpb25zOiBbNSwgMTAsIDIwLCAzMCwgNDBdLA0KICAgICAgICBwYWdlU2l6ZTogMTAsDQogICAgICAgIHRvdGFsOiAwLA0KICAgICAgICBzaG93U2l6ZUNoYW5nZXI6IHRydWUsDQogICAgICAgIHNob3dUb3RhbDogKHRvdGFsKSA9PiBg5YWxJHt0b3RhbH3mnaFgLA0KICAgICAgfSwNCiAgICAgIFRhc2twYWdpbmF0aW9uOiB7DQogICAgICAgIGN1cnJlbnRQYWdlOiAxLA0KICAgICAgICBwYWdlU2l6ZU9wdGlvbnM6IFs1LCAxMCwgMjAsIDMwLCA0MF0sDQogICAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgICAgdG90YWw6IDAsDQogICAgICAgIHNob3dTaXplQ2hhbmdlcjogdHJ1ZSwNCiAgICAgICAgc2hvd1RvdGFsOiAodG90YWwpID0+IGDlhbEke3RvdGFsfeadoWAsDQogICAgICB9LA0KICAgICAgcm93OiAiIiwNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgZGlhbG9nVmlzaWJsZXg6IGZhbHNlLA0KICAgICAgZWRpdEFmZmFpclZpc2libGU6IGZhbHNlLA0KDQogICAgICBuZXdBZmZhaXI6IHsNCiAgICAgICAgYWZmYWlyTmFtZTogIiIsDQogICAgICAgIGFmZmFpckRlc2M6ICIiDQogICAgICB9LA0KICAgICAgbmV3QWZmYWlyRm9ybTogew0KICAgICAgICBhZmZhaXJOYW1lOiAiIiwNCiAgICAgIH0sDQogICAgICBuZXdUYXNrOiB7DQogICAgICAgIHRhc2tOYW1lOiAiIiwNCiAgICAgICAgdGFza1R5cGU6ICIiLA0KICAgICAgICB0YXNrTG9jYWw6ICIiLA0KICAgICAgICB0YXNrU3RhdHVzOiAi5pyq5byA5aeLIiwNCiAgICAgICAgZmlsZXM6IFtdLA0KICAgICAgfSwNCiAgICAgIGRpYWxvZ1RpdGxlOiAiIiwNCiAgICAgIHRpdGxlOiAiIiwNCiAgICAgIHRpdGxleDogIiIsDQogICAgICBjYXNlU2V0OiB7DQoNCiAgICAgIH0sDQogICAgICB0b3RhbDogMCwNCiAgICAgIHRvdGFsMTogMCwNCiAgICAgIHNlYXJjaE1vZGVsOiB7DQogICAgICAgIHBhZ2VzaXplOiAxMCwNCiAgICAgICAgcGFnZW51bTogMSwNCiAgICAgIH0sDQogICAgICBhZmZhaXJJbmZvOiB7DQogICAgICAgIGFmZmFpcklkOiAwLA0KICAgICAgICBhZmZhaXJOYW1lOiAnJw0KICAgICAgfSwNCiAgICAgIC8vIOS7u+WKoembhuWQiOWIl+ihqOaVsOaNrg0KICAgICAgc2V0TGlzdDogW10sDQogICAgICB0YXNrTGlzdDogW10sDQogICAgICB0YWJsZUNhc2U6IHt9LA0KICAgICAgbGlrZTogdHJ1ZSwNCiAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgdXNlcm5hbWU6ICcnLA0KICAgICAgICB1c2VyX2lkOiAwDQogICAgICB9LA0KDQogICAgfTsNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIFRvb2x0aXAsDQogIH0sDQoNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFNldExpc3QoKQ0KICAgIC8vIHRoaXMuZ2V0VGFza0xpc3QoKQ0KICAgIHRoaXMuZ2V0VG9rZW5JbmZvKCkNCiAgICAvLyB0aGlzLnVzZXJfaWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcl9pZCcpDQogICAgLy8gdGhpcy5oZWFkZXJzID0gew0KICAgIC8vICAgdXNlcm5hbWU6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXJuYW1lJyksDQogICAgLy8gICB1c2VyX2lkOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJykNCiAgICAvLyB9DQogICAgdGhpcy5nZXRUYXNrU3RhdGlzdGljcygpDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyh7DQogICAgICBnZXRSZXNEYXRhOiAnZGF0YS9nZXRSZXNEYXRhJywgIC8vIOiOt+WPluWFqOWxgOeahCByZXNEYXRhDQogICAgICBnZXRUYXNrRGF0YTogJ3Rhc2svZ2V0VGFza0RhdGEnICAvLyDojrflj5blvZPliY3ku7vliqHnmoTnlLvlg4/mlbDmja4NCiAgICB9KQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0VG9rZW5JbmZvKCkgew0KICAgICAgY29uc3QgdG9rZW4gPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQ0KICAgICAgdGhpcy4kaHR0cC5nZXQoJ3BhcnNlL3Rva2VuJywgew0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCwgLy8g5bCGSldU5Luk54mM5re75Yqg5Yiw6K+35rGC5aS05LitDQogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyAvLyDorr7nva7or7fmsYLlpLTkuLpKU09O57G75Z6LDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmhlYWRlcnMudXNlcm5hbWUgPSByZXMuZGF0YS51c2VybmFtZQ0KICAgICAgICB0aGlzLmhlYWRlcnMudXNlcl9pZCA9IHJlcy5kYXRhLnVzZXJfaWQNCiAgICAgIH0pDQogICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBkYXRhOicsIGVycm9yKTsgDQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIOS7u+WKoeihqOagvOaOkuW6jw0KICAgIGN1c3RvbVNvcnQoY29sdW1uKSB7DQogICAgICBjb25zdCBwcm9wID0gY29sdW1uLnByb3ANCiAgICAgIGNvbnN0IG9yZGVyID0gY29sdW1uLm9yZGVyDQogICAgICBpZiAocHJvcCA9PT0gJ3Rhc2tTdGF0dXMnKSB7DQogICAgICAgIHRoaXMudGFza0xpc3Quc29ydCgoYSwgYikgPT4gew0KICAgICAgICAgIGNvbnN0IHN0YXR1c09yZGVyID0gew0KICAgICAgICAgICAgJ+W3suWujOaIkCc6IDEsDQogICAgICAgICAgICAn6K+E5Lyw5LitJzogMiwNCiAgICAgICAgICAgICfmnKrlvIDlp4snOiAzLA0KICAgICAgICAgICAgJ+S7u+WKoeWHuumUmSc6NCwNCiAgICAgICAgICB9DQogICAgICAgICAgY29uc3QgYU9yZGVyID0gc3RhdHVzT3JkZXJbYS50YXNrU3RhdHVzXQ0KICAgICAgICAgIGNvbnN0IGJPcmRlciA9IHN0YXR1c09yZGVyW2IudGFza1N0YXR1c10NCiAgICAgICAgICBpZiAob3JkZXIgPT09ICdkZXNjZW5kaW5nJykgew0KICAgICAgICAgICAgcmV0dXJuIGJPcmRlciAtIGFPcmRlcg0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gYU9yZGVyIC0gYk9yZGVyDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIGlmIChwcm9wID09PSAnQ3JlYXRlZEF0Jykgew0KICAgICAgICB0aGlzLnRhc2tMaXN0LnNvcnQoKGEsIGIpID0+IHsNCiAgICAgICAgY29uc3QgYVRpbWUgPSBEYXRlLnBhcnNlKGEuQ3JlYXRlZEF0KQ0KICAgICAgICBjb25zdCBiVGltZSA9IERhdGUucGFyc2UoYi5DcmVhdGVkQXQpDQogICAgICAgIGlmIChvcmRlciA9PT0gJ2Rlc2NlbmRpbmcnKSB7DQogICAgICAgICAgcmV0dXJuIGJUaW1lIC0gYVRpbWUNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gYVRpbWUgLSBiVGltZQ0KICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCg0KICAgIGhhbmRsZUNoYW5nZShmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVMaXN0DQogICAgfSwNCg0KICAgIGhhbmRsZUZpbGVTdWNjZXNzKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgY29uc29sZS5sb2coIuaWh+S7tuS4iuS8oOaIkOWKnyIsIHJlc3BvbnNlKTsNCiAgICAgIC8vIOWPr+S7peWcqOi/memHjOWkhOeQhuS4iuS8oOaIkOWKn+WQjueahOmAu+i+ke+8jOS+i+WmguabtOaWsOeVjOmdouetiQ0KICAgIH0sDQogICAgaGFuZGxlRmlsZUVycm9yKGVycikgew0KICAgICAgY29uc29sZS5lcnJvcigi5paH5Lu25LiK5Lyg5aSx6LSlIiwgZXJyKTsNCiAgICAgIC8vIOWPr+S7peWcqOi/memHjOWkhOeQhuS4iuS8oOWksei0peWQjueahOmAu+i+ke+8jOS+i+WmguaPkOekuueUqOaIt+mHjeaWsOS4iuS8oOetiQ0KICAgIH0sDQogICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsNCiAgICAgIGNvbnNvbGUubG9nKCLov5vlhaViZWZvcmVVcGxvYWQiKQ0KICAgICAgaWYgKCF0aGlzLm5ld1Rhc2suZmlsZXMpIHsNCiAgICAgICAgdGhpcy5uZXdUYXNrLmZpbGVzID0gW107DQogICAgICB9DQogICAgdGhpcy5uZXdUYXNrLmZpbGVzLnB1c2goZmlsZSk7DQogICAgY29uc29sZS5sb2coIuWHhuWkh+S4iuS8oOaWh+S7tiIsIGZpbGUpOw0KICANCiAgICB9LA0KICAgIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVMaXN0Ow0KICAgIH0sDQogICAgLy8g6I635Y+W5Lu75Yqh6ZuG5YiX6KGoDQogICAgYXN5bmMgZ2V0U2V0TGlzdCgpIHsNCiAgICAgIGNvbnN0IHRva2VuID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQ0KICAgICAgLy8gY29uc29sZS5sb2coIj09PT09PiIsIHRoaXMuaGVhZGVycykNCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnc2V0cycsIHsNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgcGFnZV9zaXplOiB0aGlzLnF1ZXJ5UGFyYW0ucGFnZXNpemUsDQogICAgICAgICAgcGFnZV9udW06IHRoaXMucXVlcnlQYXJhbS5wYWdlbnVtLA0KICAgICAgICB9LA0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gIC8vIOWcqOivt+axguWktOS4reaQuuW4piB0b2tlbg0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgLy8gY29uc29sZS5sb2coInJlcz09PT4iLCByZXMpDQogICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpDQogICAgICB9DQoNCiAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKQ0KICAgICAgdGhpcy5zZXRMaXN0ID0gcmVzLmRhdGENCiAgICAgIHRoaXMucGFnaW5hdGlvbi50b3RhbCA9IHJlcy50b3RhbA0KICAgIH0sDQoNCiAgICAvLyDojrflj5bku7vliqHpm4bkuIvnmoTku7vliqHliJfooagNCiAgICBhc3luYyBnZXRUYXNrTGlzdChJRCkgew0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KGB0YXNrL2xpc3QvJHtJRH1gLCB7DQogICAgICAgIHBhcmFtczogeyBwYWdlX3NpemU6IHRoaXMuVGFza3F1ZXJ5UGFyYW0ucGFnZXNpemUsIHBhZ2VfbnVtOiB0aGlzLlRhc2txdWVyeVBhcmFtLnBhZ2VudW0gfSwNCiAgICAgIH0pDQogICAgICAvLyBjb25zb2xlLmxvZyhyZXMpDQogICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkNCiAgICAgIHRoaXMudGFza0xpc3QgPSByZXMuZGF0YQ0KICAgICAgdGhpcy5UYXNrcGFnaW5hdGlvbi50b3RhbCA9IHJlcy50b3RhbA0KICAgICAgLy8gdGhpcy5wYWdpbmF0aW9uLnRvdGFsID0gcmVzLnRvdGFsDQogICAgfSwNCiAgICAvLyDojrflj5bku7vliqHnirbmgIENCiAgICBhc3luYyBnZXRUYXNrU3RhdGlzdGljcygpIHsNCiAgICAgIGNvbnN0IHRva2VuID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQ0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ3Rhc2svc3RhdGlzdGljJywgew0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAgLy8g5Zyo6K+35rGC5aS05Lit5pC65bimIHRva2VuDQogICAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC8vIGNvbnNvbGUubG9nKCJ0ZXN0IikNCiAgICAgIC8vIGNvbnNvbGUubG9nKHJlcykNCiAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgICAgdGhpcy5hbGxUYXNrID0gcmVzLmRhdGEudG90YWxDb3VudA0KICAgICAgdGhpcy5jdWxpbmcgPSByZXMuZGF0YS5pblByb2dyZXNzQ291bnQNCiAgICAgIHRoaXMub3V0ZWQgPSByZXMuZGF0YS5ub3RTdGFydGVkQ291bnQNCiAgICAgIHRoaXMuZmluaXNoZWQgPSByZXMuZGF0YS5leHBpcmVkQ291bnQNCiAgICB9LA0KDQogICAgLy8g5Y+q55u05o6l5pi+56S65paH5Lu26Lev5b6E5Lit55qE5paH5Lu25ZCNDQogICAgZXh0cmFjdEZpbGVOYW1lKHJvdykgew0KICAgICAgY29uc3QgZml4ZWRQYXJ0ID0gJ0Q6XFxHcmFkdWF0aW9uUHJvamVjdFxcTlBVLURhdGFiYXNlTWlncmF0aW9uXFxnaW5fR3JhZHVhdGlvblByb2plY3RcXHdlYlxcJw0KICAgICAgY29uc3QgZmlsZU5hbWUgPSByb3cudGFza1BhdGguc3Vic3RyaW5nKGZpeGVkUGFydC5sZW5ndGgpDQogICAgICByZXR1cm4gZmlsZU5hbWU7DQogICAgfSwNCg0KICAgIC8vIOS/ruaUueaXpeacn+agvOW8jw0KICAgIGZvcm1hdGVEYXRlKHJvdywgY29sdW1uKSB7DQogICAgICBsZXQgZGF0YSA9IHJvd1tjb2x1bW4ucHJvcGVydHldDQogICAgICByZXR1cm4gZGF0YSA/IGRheShkYXRhKS5mb3JtYXQoJ1lZWVnlubRNTeaciERE5pelIEhIOm1tJykgOiAn5pqC5pegJw0KICAgIH0sDQoNCiAgICAvLyDliKDpmaTku7vliqHpm4YNCiAgICBkZWxldGVTZXQoaWQpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKGlkKQ0KICAgICAgdGhpcy4kY29uZmlybSgn5o+Q56S677ya6K+35YaN5qyh56Gu6K6kJywgJ+ehruWumuimgeWIoOmZpOivpeS7u+WKoembhuWQl++8n+S4gOaXpuWIoOmZpO+8jOaXoOazleaBouWkjScsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnLA0KICAgICAgfSkNCiAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGh0dHAuZGVsZXRlKGBzZXQvJHtpZH1gKQ0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpDQogICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKQ0KICAgICAgICAgICAgICB0aGlzLmdldFNldExpc3QoKSAvLyDliKDpmaTmiJDlip/lkI7liLfmlrDnlKjmiLfliJfooagNCiAgICAgICAgICAgICAgdGhpcy5nZXRUYXNrU3RhdGlzdGljcygpDQogICAgICAgICAgICAgIC8vIHRoaXMuZ2V0VGFza0xpc3QoKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhLm1lc3NhZ2UgfHwgJ+WIoOmZpOWksei0pe+8jOivt+mHjeivlScpDQogICAgICAgICAgICB9DQogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWksei0pe+8jOivt+mHjeivlScpICAvLyA/Pz8/DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykNCiAgICAgICAgfSk7DQogICAgfSwNCg0KICAgIC8vIOabtOaUueWIhumhtQ0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnBhZ2luYXRpb24ucGFnZVNpemUgPSB2YWwNCiAgICAgIC8vIGNvbnNvbGUubG9nKGDmr4/pobUgJHt2YWx9IOadoSwgcGFnZXNpemVgLCB0aGlzLnBhZ2luYXRpb24ucGFnZVNpemUpOw0KICAgICAgdGhpcy5xdWVyeVBhcmFtLnBhZ2VzaXplID0gdGhpcy5wYWdpbmF0aW9uLnBhZ2VTaXplDQogICAgICB0aGlzLmdldFNldExpc3QoKQ0KICAgICAgdGhpcy5nZXRUYXNrU3RhdGlzdGljcygpDQoNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnBhZ2luYXRpb24uY3VycmVudFBhZ2UgPSB2YWwNCiAgICAgIC8vIGNvbnNvbGUubG9nKGDlvZPliY3pobU6ICR7dmFsfWAsIHRoaXMucGFnaW5hdGlvbi5jdXJyZW50UGFnZSk7DQogICAgICB0aGlzLnF1ZXJ5UGFyYW0ucGFnZW51bSA9IHRoaXMucGFnaW5hdGlvbi5jdXJyZW50UGFnZQ0KICAgICAgdGhpcy5nZXRTZXRMaXN0KCkNCiAgICAgIHRoaXMuZ2V0VGFza1N0YXRpc3RpY3MoKQ0KICAgIH0sDQogICAgLy8g5pu05pS55Lu75Yqh5YiG6aG1DQogICAgaGFuZGxlVGFza1NpemVDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLlRhc2twYWdpbmF0aW9uLnBhZ2VTaXplID0gdmFsDQogICAgICAvLyBjb25zb2xlLmxvZyhg5q+P6aG1ICR7dmFsfSDmnaEsIHBhZ2VzaXplYCwgdGhpcy5wYWdpbmF0aW9uLnBhZ2VTaXplKTsNCiAgICAgIHRoaXMuVGFza3F1ZXJ5UGFyYW0ucGFnZXNpemUgPSB0aGlzLlRhc2twYWdpbmF0aW9uLnBhZ2VTaXplDQogICAgICB0aGlzLmdldFRhc2tMaXN0KHRoaXMuY3VyUm93SWQpDQogICAgICB0aGlzLmdldFRhc2tTdGF0aXN0aWNzKCkNCiAgICB9LA0KICAgIGhhbmRsZVRhc2tDdXJyZW50Q2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5UYXNrcGFnaW5hdGlvbi5jdXJyZW50UGFnZSA9IHZhbA0KICAgICAgLy8gY29uc29sZS5sb2coYOW9k+WJjemhtTogJHt2YWx9YCwgdGhpcy5wYWdpbmF0aW9uLmN1cnJlbnRQYWdlKTsNCiAgICAgIHRoaXMuVGFza3F1ZXJ5UGFyYW0ucGFnZW51bSA9IHRoaXMuVGFza3BhZ2luYXRpb24uY3VycmVudFBhZ2UNCiAgICAgIHRoaXMuZ2V0VGFza0xpc3QodGhpcy5jdXJSb3dJZCkNCiAgICAgIHRoaXMuZ2V0VGFza1N0YXRpc3RpY3MoKQ0KICAgIH0sDQogICAgLy/liKDpmaTku7vliqENCiAgICBhc3luYyBkZWxldGVUYXNrKGlkLHNldGlkKSB7DQogICAgICBjb25zdCByZXMgPWF3YWl0IHRoaXMuJGh0dHAuZ2V0KGB0YXNrL2luZm8vJHtpZH1gKQ0KICAgICAgLy8gaWYgKHJlcy5kYXRhLnRhc2tTdGF0dXM9PXRoaXMuVEFTS0ZJTkFMfHwgcmVzLmRhdGEudGFza1N0YXR1cz09dGhpcy5UQVNLU1RPUCl7DQogICAgICBpZiAocmVzLmRhdGEudGFza1N0YXR1cyAhPT0gdGhpcy5UQVNLRVZBTEFURSkgew0KDQogICAgICAgIC8vIGNvbnNvbGUubG9nKGlkKQ0KICAgICAgICB0aGlzLiRjb25maXJtKCfmj5DnpLrvvJror7flho3mrKHnoa7orqQnLCAn56Gu5a6a6KaB5Yig6Zmk6K+l5Lu75Yqh5ZCX77yf5LiA5pem5Yig6Zmk77yM5peg5rOV5oGi5aSNJywgew0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgIH0pDQogICAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRodHRwLmRlbGV0ZShgdGFzay8ke2lkfWApDQogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKQ0KICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpDQogICAgICAgICAgICAgICAgdGhpcy5nZXRUYXNrTGlzdChzZXRpZCkgLy8g5Yig6Zmk5oiQ5Yqf5ZCO5Yi35paw5Lu75Yqh5YiX6KGoDQogICAgICAgICAgICAgICAgdGhpcy5nZXRUYXNrU3RhdGlzdGljcygpDQogICAgICAgICAgICAgICAgLy8gdGhpcy5nZXRUYXNrTGlzdCgpDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhLm1lc3NhZ2UgfHwgJ+WIoOmZpOWksei0pe+8jOivt+mHjeivlScpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWksei0pe+8jOivt+mHjeivlScpDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKCflt7Llj5bmtojliKDpmaQnKQ0KICAgICAgICAgIH0pOw0KICAgICAgICAgIA0KICAgICAgfWVsc2V7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfku7vliqHmraPlnKjov5vooYzvvIzkuI3lj6/liKDpmaQnKQ0KICAgICAgfQ0KICAgICAgDQogICAgfSwNCg0KICAgIC8vIOaQnOe0ouS7u+WKoembhg0KICAgIGFzeW5jIHNlYXJjaFNldCgpIHsNCiAgICAgIGNvbnN0IHRva2VuID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQ0KICAgICAgLy8gY29uc29sZS5sb2coIui/m+WFpXNlYXJjaGFmZmFpcuWHveaVsCIpDQogICAgICB0aGlzLnNlYXJjaE1vZGVsLnBhZ2VudW0gPSAxDQogICAgICB0aGlzLnBhZ2luYXRpb24uY3VycmVudFBhZ2UgPSAxDQogICAgICB0aGlzLnNlYXJjaE1vZGVsLnBhZ2VzaXplID0gdGhpcy5wYWdpbmF0aW9uLnBhZ2VTaXplDQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ3NldC9zZWFyY2gnLCB7DQogICAgICAgIHBhcmFtczogew0KICAgICAgICAgIHBhZ2Vfc2l6ZTogdGhpcy5zZWFyY2hNb2RlbC5wYWdlc2l6ZSwNCiAgICAgICAgICBwYWdlX251bTogdGhpcy5zZWFyY2hNb2RlbC5wYWdlbnVtLA0KICAgICAgICAgIHNldF9uYW1lOiB0aGlzLnNlYXJjaE1vZGVsLm5hbWUsDQogICAgICAgICAgLy8gaWQ6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXJfaWQnKQ0KICAgICAgICB9LA0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCAvLyDlnKjor7fmsYLlpLTkuK3mkLrluKYgdG9rZW4NCiAgICAgICAgfQ0KICAgICAgfSkNCg0KICAgICAgLy8gY29uc29sZS5sb2coImFhYWHlt7Lnu4/lvpfliLDlkI7nq6/ov5Tlm57nmoTmlbDmja7vvJoiLCByZXMpDQogICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkNCiAgICAgIHRoaXMuc2V0TGlzdCA9IHJlcy5kYXRhDQogICAgICB0aGlzLnBhZ2luYXRpb24udG90YWwgPSByZXMudG90YWwNCiAgICB9LA0KDQogICAgLy8g57yW6L6R5Lu75Yqh6ZuG5ZCIDQogICAgYXN5bmMgaGFuZGxlRWRpdEFmZmFpcihpZCkgew0KICAgICAgdGhpcy5lZGl0QWZmYWlyVmlzaWJsZSA9IHRydWUNCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldChgc2V0LyR7aWR9YCkNCiAgICAgIHRoaXMuYWZmYWlySW5mbyA9IHJlcy5kYXRhDQogICAgICB0aGlzLmFmZmFpckluZm8uaWQgPSBpZA0KICAgIH0sDQogICAgZWRpdFNldCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZWRpdEFmZmFpclJlZi52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WPguaVsOS4jeespuWQiOimgeaxgu+8jOivt+mHjeaWsOi+k+WFpScpDQogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnB1dChgc2V0LyR7dGhpcy5hZmZhaXJJbmZvLmlkfWAsIHsNCiAgICAgICAgICBzZXROYW1lOiB0aGlzLmFmZmFpckluZm8uYWZmYWlyTmFtZQ0KICAgICAgICB9KQ0KICAgICAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgICAgICB0aGlzLmVkaXRBZmZhaXJWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmm7TmlrDku7vliqHpm4bkv6Hmga/miJDlip8nKQ0KICAgICAgICB0aGlzLmdldFNldExpc3QoKQ0KICAgICAgfSkNCiAgICB9LA0KDQogICAganVtcGhhbmRlbFNxbCgpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdGVzdC9yZXN1bHQnKQ0KICAgIH0sDQogICAganVtcGhhbmRlbERsKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy90ZXN0L3JlcG9ydGRsJykNCiAgICB9LA0KICAgIFBhdXNlVGFzayh0YXNraWQsc2V0aWQpew0KICAgICAgY29uc3QgcmVzID0gdGhpcy4kaHR0cC5nZXQoYHRhc2svcGF1c2UvJHt0YXNraWR9YCkNCiAgICAgIHRoaXMuZ2V0U2V0TGlzdCgpDQogICAgICB0aGlzLmdldFRhc2tMaXN0KHNldGlkKQ0KICAgICAgdGhpcy5nZXRUYXNrU3RhdGlzdGljcygpDQogICAgfSwNCiAgICBhc3luYyBiZWdpbk1hdGNoKGlkLGxpbmVudW0pIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KGB0YXNrL2luZm8vJHtpZH1gKQ0KICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpDQogICAgICBjb25zb2xlLmxvZygi5Lu75Yqh57G75Z6L5Li6OiIsIHJlcy5kYXRhLnRhc2tUeXBlKQ0KICAgICAgaWYgKHJlcy5kYXRhLnRhc2tUeXBlID09PSB0aGlzLk9SQUNMRURSQVd8fHJlcy5kYXRhLnRhc2tUeXBlID09PSB0aGlzLk1ZU1FMRFJBVykgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFByb21pc2UucmFjZShbDQogICAgICAgICAgICAvLyB0aGlzLiRodHRwLmdldChgc3FsL2RyYXcvJHtpZH1gKSwNCiAgICAgICAgICAgIHRoaXMuJGh0dHAuZ2V0KGBzcWwvYWRkdGFzay8ke2lkfWApLA0KICAgICAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4gc2V0VGltZW91dCgoKSA9PiByZWplY3QobmV3IEVycm9yKCfor7fmsYLotoXml7YnKSksIDE1MDAwKmxpbmVudW0pKSAvLyDorr7nva42KmxpbmVudW3np5LotoXml7YNCiAgICAgICAgICAgXSk7DQogICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgIH0NCiAgICAgICAgICAgdGhpcy5nZXRTZXRMaXN0KCkNCiAgICAgICAgICAgdGhpcy5nZXRUYXNrTGlzdCgpDQogICAgICAgICAgIHRoaXMuZ2V0VGFza1N0YXRpc3RpY3MoKQ0KICAgICAgICAgICBjb25zb2xlLmxvZygiZ2V0IHRhc2s6IixyZXNwb25zZSkNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCLojrflj5ZzcWznlLvlg4/liIbmnpDnu5PmnpzlpLHotKU6IiwgZXJyb3IpDQogICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KGBzcWwvZWRpdHN0YXR1cy8ke2lkfWApDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGVsc2V7DQogICAgICAgIHRyeXsNCiAgICAgICAgICBjb25zb2xlLmxvZygidGltZSIsKQ0KICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUHJvbWlzZS5yYWNlKFsNCiAgICAgICAgICAgIC8vIHRoaXMuJGh0dHAuZ2V0KGBzcWwvYWRhcHQvJHtpZH1gKSwNCiAgICAgICAgICAgIHRoaXMuJGh0dHAuZ2V0KGBzcWwvYWRkdGFzay8ke2lkfWApLA0KICAgICAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4gc2V0VGltZW91dCgoKSA9PiByZWplY3QobmV3IEVycm9yKCfor7fmsYLotoXml7YnKSksIDE1MDAwKmxpbmVudW0pKSAvLyDorr7nva4xMOenkui2heaXtg0KICAgICAgICAgIF0pOw0KICAgICAgICAgIGNvbnNvbGUubG9nKCJPcmFjbGXpgILphY3nmoTlk43lupQiLHJlc3BvbnNlKQ0KICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgIH0NCiAgICAgICAgICAgdGhpcy5nZXRTZXRMaXN0KCkNCiAgICAgICAgICAgdGhpcy5nZXRUYXNrTGlzdCgpDQogICAgICAgICAgIHRoaXMuZ2V0VGFza1N0YXRpc3RpY3MoKQ0KICAgICAgICB9Y2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnJvcikNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCLojrflj5ZzcWzpgILphY3liIbmnpDnu5PmnpzlpLHotKU6IiwgZXJyb3IpDQogICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KGBzcWwvZWRpdHN0YXR1cy8ke2lkfWApDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICB9DQogICAgfSwNCg0KICAgIGFzeW5jIGp1bXBoYW5kZWxNYXRjaChpZCkgew0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoYHRhc2svaW5mby8ke2lkfWApDQogICAgICBjb25zb2xlLmxvZygi5Lu75Yqh54q25oCB5Li677yaIiwgcmVzLmRhdGEpDQogICAgICAvLyBjb25zdCB0YXNrRGF0YSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3Rhc2svZ2V0VGFza0RhdGEnXShpZCkNCiAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKCcvdGVzdC9tYXRjaCcpDQogICAgICBpZihyZXMuZGF0YS50YXNrVHlwZT09dGhpcy5PUkFDTEVEUkFXfHxyZXMuZGF0YS50YXNrVHlwZT09dGhpcy5NWVNRTERSQVcpew0KICAgICAgICAgIGlmIChyZXMuZGF0YS50YXNrU3RhdHVzID09PSB0aGlzLlRBU0tGSU5BTCkgey8v6aG16Z2i5ZCN56ew5L+u5pS5DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ3Jlc3VsdCcsIHBhcmFtczoge3Rhc2tJZDogaWQsdGFza1R5cGU6cmVzLmRhdGEudGFza1R5cGV9fSkNCiAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLnRhc2tTdGF0dXMgPT09ICfmnKrlvIDlp4snKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5Lu75Yqh5pyq5byA5aeL77yM5LiN5Y+v6Lez6L2s5p+l55yL57uT5p6cJykNCiAgICAgICAgICB9DQogICAgICB9ZWxzZXsNCiAgICAgICAgICBpZiAocmVzLmRhdGEudGFza1N0YXR1cyA9PT0gdGhpcy5UQVNLRklOQUwpIHsvL+mhtemdouWQjeensOS4uumAgumFjeeahOe7k+aenOS/ruaUuQ0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdtYXRjaCcsIHBhcmFtczoge3Rhc2tJZDogaWR9fSkNCiAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLnRhc2tTdGF0dXMgPT09ICfmnKrlvIDlp4snKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5Lu75Yqh5pyq5byA5aeL77yM5LiN5Y+v6Lez6L2s5p+l55yL57uT5p6cJykNCiAgICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8vIOiOt+WPluW9k+WJjeS7u+WKoeeahOS7u+WKoeaVsOaNrg0KICAgICAgY29uc3QgdGFza0RhdGEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyd0YXNrL2dldFRhc2tEYXRhJ10oaWQpDQogICAgICBjb25zb2xlLmxvZygidGVzdCIsdGFza0RhdGEpDQogICAgICAvLyBpZiAoIXRhc2tEYXRhKSB7DQogICAgICBpZiAoMSkgew0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KGB0YXNrL3Jlc3VsdC8ke2lkfWApDQogICAgICAgIGNvbnN0IHJlc3VsdERhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEudGFza1Jlc3VsdCkNCiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Rhc2svc2V0VGFza0RhdGEnLCB7IHRhc2tJZDogaWQsIGRhdGE6IHJlc3VsdERhdGF9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8gbmV3VGFzaygpIHsNCiAgICAvLyAgIHRoaXMuJHJvdXRlci5wdXNoKCIvdGVzdC90YXNrIik7DQogICAgLy8gfSwNCiAgICAvLyBvcGVuRmlsZSgpIHsNCiAgICAvLyAgIHRoaXMuJHJlZnMuZm9sZGVySW5wdXQuY2xpY2soKTsNCiAgICAvLyB9LA0KICAgIC8vIGNoYW5nZUZpbGUoZSkgew0KICAgIC8vICAgLy8gY29uc3QgZm9sZGVyUGF0aCA9IGUudGFyZ2V0LmZpbGVzWzBdLnBhdGg7IC8vIOiOt+WPlumAieaLqeeahOaWh+S7tuWkuei3r+W+hA0KICAgIC8vICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdDQogICAgLy8gICBjb25zb2xlLmxvZygi5ou/5Yiw55qE5paH5Lu25Li677yaIiwgZmlsZSkNCiAgICAvLyAgIHRoaXMubmV3VGFzay50YXNrTG9jYWwgPSBmaWxlDQogICAgLy8gICAvLyB0aGlzLm5ld1NldC5mb2xkZXIgPSBmb2xkZXJQYXRoOyAvLyDlsIbot6/lvoTnu5HlrprliLDmlbDmja7lr7nosaHkuK3nmoTlsZ7mgKcNCiAgICAvLyB9LA0KICAgIGdldENhc2VzQnlJZChpZCkgew0KICAgICAgdGhpcy5nZXRDYXNlTGlzdChpZCk7DQogICAgfSwNCiAgICBhZGRDYXNlKCkgew0KICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICLmt7vliqDku7vliqEiOw0KICAgIH0sDQogICAgaGFuZGxlQWRkKCkgew0KICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICLmt7vliqDkuJrliqHlkIgiOw0KICAgICAgdGhpcy5jYXNlU2V0ID0gew0KICAgICAgICBpZDogIiIsDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICBwYXRoOiAiIiwNCiAgICAgICAgY2FzZXM6IFtdLA0KICAgICAgfTsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICBoYW5kbGVBZGRUYXNrKGlkKSB7DQogICAgICB0aGlzLmRpYWxvZ1RpdGxleCA9ICLmt7vliqDku7vliqEiOw0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxleCA9IHRydWU7DQogICAgICB0aGlzLnNlbGVjdFJvd0lkID0gaWQ7DQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVFZGl0VGFzayhpZCwgYWZmYWlyaWQpIHsNCiAgICAgIGNvbnN0IHJlcyA9YXdhaXQgdGhpcy4kaHR0cC5nZXQoYHRhc2svaW5mby8ke2lkfWApDQogICAgICBpZiAocmVzLmRhdGEudGFza1N0YXR1cz09dGhpcy5UQVNLRklOQUx8fHJlcy5kYXRhLnRhc2tTdGF0dXM9PXRoaXMuVEFTS1NUT1Apew0KICAgICAgICB0aGlzLnRpdGxlID0gIuS/ruaUueS7u+WKoSI7DQogICAgICAgIHRoaXMuZGlhbG9nRWRpdFZpc2libGV4ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZWxlY3RSb3dJZCA9IGFmZmFpcmlkOw0KICAgICAgICB0aGlzLnNlbGVjdFRhc2tJZCA9IGlkDQogICAgICB9ZWxzZSBpZiAocmVzLmRhdGEudGFza1N0YXR1cz09dGhpcy5UQVNLRVZBTEFURSl7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfku7vliqHmraPlnKjov5vooYzvvIzkuI3lj6/nvJbovpEnKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDkuJrliqHlkIjooajmoLzooYzngrnlh7vkuovku7blpITnkIblh73mlbANCiAgICBoYW5kbGVWaWV3KHJvdykgew0KICAgICAgLy8gY29uc29sZS5sb2coIuajgOa1i+aJp+ihjGhhbmRsZXZpZXciKQ0KICAgICAgLy8gY29uc29sZS5sb2cocm93LklEKQ0KICAgICAgdGhpcy5jdXJSb3dJZCA9IHJvdy5JRA0KICAgICAgdGhpcy5nZXRUYXNrTGlzdChyb3cuSUQpDQogICAgICB0aGlzLmdldFRhc2tTdGF0aXN0aWNzKCkNCiAgICB9LA0KICAgIC8vIOmAieaLqeaWh+S7tuWkueaMiemSrueCueWHu+S6i+S7tuWkhOeQhuWHveaVsA0KICAgIGhhbmRsZVNlbGVjdEZvbGRlcigpIHsNCiAgICAgIGNvbnN0IGZ1ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9wZW4iKTsNCiAgICAgIGlmIChmdSA9PSBudWxsKSByZXR1cm47DQogICAgICB0aGlzLnRleHRhcmVhID0gZnUuZmlsZXNbMF0ubmFtZTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKGZ1LmZpbGVzWzBdLm5hbWUpOw0KICAgIH0sDQoNCiAgICAvLyDlhbPpl63mt7vliqAv57yW6L6R5Lia5Yqh5ZCI5a+56K+d5qGG5YmN55qE6ZKp5a2Q5Ye95pWwDQogICAgaGFuZGxlQ2xvc2VEaWFsb2coZG9uZSkgew0KICAgICAgdGhpcy4kY29uZmlybSgi56Gu6K6k5YWz6Zet77yfIikNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuc2VsZWN0Um93SWQgPSBudWxsDQogICAgICAgICAgdGhpcy5zZWxlY3RUYXNrSWQgPSBudWxsDQogICAgICAgICAgZG9uZSgpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTsNCiAgICB9LA0KDQogICAgLy8g56Gu5a6a5re75YqgL+e8lui+keS7u+WKoembhuWQiOWvueivneahhuaMiemSrueCueWHu+S6i+S7tuWkhOeQhuWHveaVsA0KICAgIGFkZFNldCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuYWRkQWZmYWlyUmVmLnZhbGlkYXRlKGFzeW5jICh2YWxpZCkgPT4gew0KICAgICAgICBjb25zdCB0b2tlbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykNCiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WPguaVsOS4jeespuWQiOimgeaxgu+8jOivt+mHjeaWsOi+k+WFpScpDQogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJ3NldC9hZGQnLCB7DQogICAgICAgICAgc2V0TmFtZTogdGhpcy5uZXdBZmZhaXIuYWZmYWlyTmFtZSwNCiAgICAgICAgICBzZXREZXNjOiB0aGlzLm5ld0FmZmFpci5hZmZhaXJEZXNjLA0KICAgICAgICAgIC8vIHVzZXJJZDogcGFyc2VJbnQoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcl9pZCcpLCAxMCkNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAgLy8g5Zyo6K+35rGC5aS05Lit5pC65bimIHRva2VuDQogICAgICAgIH19KQ0KICAgICAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgICAgICB0aGlzLiRyZWZzLmFkZEFmZmFpclJlZi5yZXNldEZpZWxkcygpDQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5oiQ5YqfJykNCiAgICAgICAgdGhpcy5nZXRTZXRMaXN0KCkNCiAgICAgICAgdGhpcy5nZXRUYXNrU3RhdGlzdGljcygpDQogICAgICB9KQ0KICAgIH0sDQoNCiAgICAvL+a3u+WKoOS7u+WKoQ0KICAgIC8vIGFkZFRhc2soKSB7DQogICAgLy8gICAvLyB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoKTsNCiAgICAvLyAgIHRoaXMuJHJlZnMubmV3VGFza1JlZi52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsNCiAgICAvLyAgICAgaWYgKCF2YWxpZCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WPguaVsOS4jeespuWQiOimgeaxgu+8jOivt+mHjeaWsOi+k+WFpScpDQogICAgLy8gICAgIGlmICh0aGlzLnNlbGVjdFRhc2tJZCA9PSBudWxsKSB7DQogICAgLy8gICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgndGFzay9hZGQnLCB7DQogICAgLy8gICAgICAgICBTZXRJZDogdGhpcy5zZWxlY3RSb3dJZCwNCiAgICAvLyAgICAgICAgIFRhc2tOYW1lOiB0aGlzLm5ld1Rhc2sudGFza05hbWUsDQogICAgLy8gICAgICAgICBUYXNrUGF0aDogdGhpcy5uZXdUYXNrLnRhc2tMb2NhbCwNCiAgICAvLyAgICAgICAgIFRhc2tUeXBlOiB0aGlzLm5ld1Rhc2sudGFza1R5cGUsDQogICAgLy8gICAgICAgICBUYXNrU3RhdHVzOiB0aGlzLm5ld1Rhc2sudGFza1N0YXR1cywNCiAgICAvLyAgICAgICB9KQ0KICAgIC8vICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgLy8gICAgICAgdGhpcy51cGxvYWRUYXNrSUQgPSByZXMuZGF0YS5JRA0KICAgIC8vICAgICAgIGNvbnNvbGUubG9nKCLkuIrkvKDku7vliqFJROS4uu+8miIsIHRoaXMudXBsb2FkVGFza0lEKQ0KICAgIC8vICAgICAgIGF3YWl0IHRoaXMuJG5leHRUaWNrKCkNCiAgICAvLyAgICAgICB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoKQ0KICAgIC8vICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5oiQ5YqfJykNCiAgICAvLyAgICAgfSBlbHNlIHsNCiAgICAvLyAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgIC8vICAgICB9DQogICAgICAgICAgDQogICAgLy8gICAgICAgdGhpcy4kcmVmcy5uZXdUYXNrUmVmLnJlc2V0RmllbGRzKCk7DQogICAgLy8gICAgICAgdGhpcy5kaWFsb2dWaXNpYmxleCA9IGZhbHNlDQogICAgLy8gICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3RSb3dJZCkNCiAgICAvLyAgICAgICB0aGlzLmdldFRhc2tMaXN0KHRoaXMuc2VsZWN0Um93SWQpDQogICAgLy8gICAgICAgdGhpcy5nZXRUYXNrU3RhdGlzdGljcygpDQogICAgLy8gICAgIH0NCiAgICAvLyAgICAgLy8gZWxzZSB7DQogICAgLy8gICAgIC8vICAgY29uc3QgaWQgPSB0aGlzLnNlbGVjdFRhc2tJZA0KICAgIC8vICAgICAvLyAgIHRoaXMuc2VsZWN0VGFza0lkID0gbnVsbA0KICAgIC8vICAgICAvLyAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnB1dChgdGFzay8ke2lkfWAsIHsNCiAgICAvLyAgICAgLy8gICAgIFNldElkOiB0aGlzLnNlbGVjdFJvd0lkLA0KICAgIC8vICAgICAvLyAgICAgVGFza05hbWU6IHRoaXMubmV3VGFzay50YXNrTmFtZSwNCiAgICAvLyAgICAgLy8gICAgIC8vIFRhc2tQYXRoOiB0aGlzLm5ld1Rhc2sudGFza0xvY2FsLA0KICAgIC8vICAgICAvLyAgICAgVGFza1R5cGU6IHRoaXMubmV3VGFzay50YXNrVHlwZSwNCiAgICAvLyAgICAgLy8gICAgIFRhc2tTdGF0dXM6IHRoaXMubmV3VGFzay50YXNrU3RhdHVzLA0KICAgIC8vICAgICAvLyAgIH0pDQoNCiAgICAvLyAgICAgLy8gICBjb25zb2xlLmxvZygi5L+u5pS55Lu75YqhIiwgdGhpcy4kcmVmcy51cGxvYWQudXBsb2FkRmlsZXMubGVuZ3RoKQ0KICAgIC8vICAgICAvLyAgIGlmICh0aGlzLiRyZWZzLnVwbG9hZC51cGxvYWRGaWxlcy5sZW5ndGggPT09IDEpIHsNCiAgICAvLyAgICAgLy8gICAgIHRoaXMudXBsb2FkVGFza0lEID0gaWQNCiAgICAvLyAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJiZmRqc2rkuIrkvKDku7vliqFJROS4uu+8miIsIHRoaXMudXBsb2FkVGFza0lEKQ0KICAgIC8vICAgICAvLyAgICAgYXdhaXQgdGhpcy4kbmV4dFRpY2soKQ0KICAgIC8vICAgICAvLyAgICAgdGhpcy4kcmVmcy51cGxvYWQuc3VibWl0KCkNCiAgICAvLyAgICAgLy8gICB9DQogICAgLy8gICAgIC8vICAgLy8gaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkNCiAgICAvLyAgICAgLy8gICAvLyB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgLy8gICAgIC8vICAgLy8gICBpZiAodGhpcy4kcmVmcy5uZXdUYXNrUmVmKSB7DQoNCiAgICAvLyAgICAgLy8gICAvLyAgIH0NCiAgICAvLyAgICAgLy8gICAvLyB9KTsNCiAgICAvLyAgICAgLy8gICB0aGlzLiRyZWZzLm5ld1Rhc2tSZWYucmVzZXRGaWVsZHMoKTsNCiAgICAvLyAgICAgLy8gICB0aGlzLmRpYWxvZ1Zpc2libGV4ID0gZmFsc2UNCiAgICAvLyAgICAgLy8gICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpDQogICAgLy8gICAgIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3RSb3dJZCkNCiAgICAvLyAgICAgLy8gICB0aGlzLmdldFRhc2tMaXN0KHRoaXMuc2VsZWN0Um93SWQpDQogICAgLy8gICAgIC8vICAgdGhpcy5nZXRUYXNrU3RhdGlzdGljcygpDQogICAgLy8gICAgIC8vICAgdGhpcy5zZWxlY3RSb3dJZCA9IG51bGwNCiAgICAvLyAgICAgLy8gfQ0KICAgIC8vICAgfSkNCiAgICAvLyB9LA0KDQogICAgYXN5bmMgYWRkVGFzaygpIHsNCiAgICAgIHRoaXMuJHJlZnMubmV3VGFza1JlZi52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsNCiAgICAgIGlmICghdmFsaWQpIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCflj4LmlbDkuI3nrKblkIjopoHmsYLvvIzor7fph43mlrDovpPlhaUnKTsNCg0KICAgIC8vIOajgOafpeaYr+aWsOS7u+WKoei/mOaYr+W3suacieS7u+WKoQ0KICAgIGlmICh0aGlzLnNlbGVjdFRhc2tJZCA9PSBudWxsKSB7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCd0YXNrL2FkZCcsIHsNCiAgICAgICAgU2V0SWQ6IHRoaXMuc2VsZWN0Um93SWQsDQogICAgICAgIFRhc2tOYW1lOiB0aGlzLm5ld1Rhc2sudGFza05hbWUsDQogICAgICAgIFRhc2tQYXRoOiB0aGlzLm5ld1Rhc2sudGFza0xvY2FsLA0KICAgICAgICBUYXNrVHlwZTogdGhpcy5uZXdUYXNrLnRhc2tUeXBlLA0KICAgICAgICBUYXNrU3RhdHVzOiB0aGlzLm5ld1Rhc2sudGFza1N0YXR1cw0KICAgICAgfSk7DQoNCiAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgdGhpcy51cGxvYWRUYXNrSUQgPSByZXMuZGF0YS5JRDsNCiAgICAgICAgY29uc29sZS5sb2coIuS4iuS8oOS7u+WKoUlE5Li677yaIiwgdGhpcy51cGxvYWRUYXNrSUQpOw0KICAgICAgICBhd2FpdCB0aGlzLiRuZXh0VGljaygpOw0KDQogICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndGFza0lEJywgdGhpcy51cGxvYWRUYXNrSUQpOw0KDQogICAgICAgIA0KICAgICAgICBjb25zb2xlLmxvZygi55yL55yL5pyJ5rKh5pyJ5paH5Lu2Iix0aGlzLmZpbGVMaXN0KQ0KICAgICAgICAvLyDlsIbmr4/kuKrmlofku7bpmYTliqDliLAgZm9ybURhdGENCiAgICAgICAgdGhpcy5maWxlTGlzdC5mb3JFYWNoKChmaWxlKSA9PiB7DQogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlcycsIGZpbGUucmF3KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMudXBsb2FkVXJsLCB7DQogICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhDQogICAgICAgICAgfSk7DQogICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7DQoNCiAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwIHx8IHJlc3VsdC5zdGF0dXMgPT09IDMwMDYpIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXN1bHQubWVzc2FnZSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzdWx0Lm1lc3NhZ2UpOw0KICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpOw0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWksei0pScpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy50YXNrTGlzdCA9IFtdDQogICAgICAgIHRoaXMuJHJlZnMubmV3VGFza1JlZi5yZXNldEZpZWxkcygpOw0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGV4ID0gZmFsc2U7DQogICAgICAgIHRoaXMuZ2V0VGFza0xpc3QodGhpcy5zZWxlY3RSb3dJZCk7DQogICAgICAgIHRoaXMuZ2V0VGFza1N0YXRpc3RpY3MoKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOw0KICAgICAgfQ0KICAgIH0NCiAgfSk7DQp9LA0KDQoNCiAgICBhc3luYyBlZGl0VGFzaygpew0KICAgICAgY29uc3QgaWQgPSB0aGlzLnNlbGVjdFRhc2tJZA0KICAgICAgdGhpcy5zZWxlY3RUYXNrSWQgPSBudWxsDQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wdXQoYHRhc2svJHtpZH1gLCB7DQogICAgICBTZXRJZDogdGhpcy5zZWxlY3RSb3dJZCwNCiAgICAgIFRhc2tOYW1lOiB0aGlzLm5ld1Rhc2sudGFza05hbWUsDQogICAgICAvLyBUYXNrUGF0aDogdGhpcy5uZXdUYXNrLnRhc2tMb2NhbCwNCiAgICAgIFRhc2tUeXBlOiB0aGlzLm5ld1Rhc2sudGFza1R5cGUsDQogICAgICBUYXNrU3RhdHVzOiB0aGlzLm5ld1Rhc2sudGFza1N0YXR1cywNCiAgICAgIH0pDQoNCiAgICAgIGNvbnNvbGUubG9nKCLkv67mlLnku7vliqEiLCB0aGlzLiRyZWZzLnVwbG9hZC51cGxvYWRGaWxlcy5sZW5ndGgpDQogICAgICBpZiAodGhpcy4kcmVmcy51cGxvYWQudXBsb2FkRmlsZXMubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgdGhpcy51cGxvYWRUYXNrSUQgPSBpZA0KICAgICAgICAgIGNvbnNvbGUubG9nKCJiZmRqc2rkuIrkvKDku7vliqFJROS4uu+8miIsIHRoaXMudXBsb2FkVGFza0lEKQ0KICAgICAgICAgIGF3YWl0IHRoaXMuJG5leHRUaWNrKCkNCiAgICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoKQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICB0aGlzLiRyZWZzLm5ld1Rhc2tSZWYucmVzZXRGaWVsZHMoKTsNCiAgICAgICAgdGhpcy5kaWFsb2dFZGl0VmlzaWJsZXggPSBmYWxzZQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpDQogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3RSb3dJZCkNCiAgICAgICAgdGhpcy5nZXRUYXNrTGlzdCh0aGlzLnNlbGVjdFJvd0lkKQ0KICAgICAgICB0aGlzLmdldFRhc2tTdGF0aXN0aWNzKCkNCiAgICAgICAgdGhpcy5zZWxlY3RSb3dJZCA9IG51bGwNCiAgICB9LA0KICAgIA0KICAgIGFzeW5jIGRvd25sb2FkUmVzdWx0KGlkKSB7DQogICAgICAvLyB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGBodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2Rvd25sb2FkLyR7aWR9YA0KICAgICAvLyDosIPnlKjmjqXlj6Pojrflj5bmiqXlkYrmlbDmja4NCiAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoYC9kb3dubG9hZC8ke2lkfWApOw0KDQogICAgaWYgKHJlcy5kYXRhLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1lc3NhZ2UpDQogICAgfSBlbHNlIHsNCiAgICBjb25zdCB0YXNrUmVzdWx0ID0gSlNPTi5wYXJzZShyZXMuZGF0YS50YXNrUmVzdWx0KQ0KICAgIA0KICAgIGNvbnN0IHRhYmxlRGF0YSA9IE9iamVjdC52YWx1ZXModGFza1Jlc3VsdCkNCiAgICBjb25zb2xlLmxvZygidGFibGVEYXRhIiwgdGFibGVEYXRhKQ0KICAgICAgLy8g5L2/55So6I635Y+W5Yiw55qE5pWw5o2u5Yqo5oCB55Sf5oiQIEhUTUwg5YaF5a65DQogICAgbGV0IGh0bWxDb250ZW50ID0gYA0KICAgIDxodG1sPg0KICAgICAgPGhlYWQ+DQogICAgICAgIDx0aXRsZT4ke3Jlcy5kYXRhLnRhc2tOYW1lfTwvdGl0bGU+DQogICAgICAgIDxzdHlsZT4NCiAgICAgICAgYm9keSB7DQogICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgIG1hcmdpbjogMDsNCiAgICBwYWRkaW5nOiAyMHB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQogIH0NCiAgaDEsIGgyIHsNCiAgICBjb2xvcjogIzMzMzsNCiAgfQ0KICB0YWJsZSB7DQogICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIG1hcmdpbi10b3A6IDIwcHg7DQogIH0NCiAgdGgsIHRkIHsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgIHBhZGRpbmc6IDhweDsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICB9DQogIHRoIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOw0KICB9DQogIHRyOm50aC1jaGlsZChldmVuKSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsNCiAgfQ0KICB0cjpob3ZlciB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2RkZDsNCiAgfQ0KICAgICAgICAgIDwvc3R5bGU+DQogICAgICA8L2hlYWQ+DQogICAgPGJvZHk+DQogICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAyMHB4OyI+DQogIDxoMSBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDI4cHg7IGNvbG9yOiAjMzMzOyI+JHtyZXMuZGF0YS50YXNrTmFtZX3ku7vliqHnmoTor6bmg4U8L2gxPg0KICA8cCBzdHlsZT0iZm9udC1zaXplOiAyMHB4OyI+5Lu75Yqh57G75Z6L77yaJHtyZXMuZGF0YS50YXNrVHlwZX08L3A+DQogIDxwIHN0eWxlPSJmb250LXNpemU6IDIwcHg7Ij7or6Xku7vliqHlhbHlkKvmnIkke3Jlcy5kYXRhLnNxbExlbmd0aH3mnaFTUUzor63lj6U8L3A+DQogIDxwIHN0eWxlPSJmb250LXNpemU6IDIwcHg7Ij7pgILphY3nu5PmnpzlpoLkuIvvvJo8L3A+DQo8L2Rpdj4NCiAgICAgIDx0YWJsZT4NCiAgICAgICAgPHRyPg0KICAgICAgICAgIDx0aD7lr7nosaHlkI08L3RoPg0KICAgICAgICAgIDx0aD7lr7nosaHnsbvlnos8L3RoPg0KICAgICAgICAgIDx0aD5DQmFzZeWunueOsOaDheWGtTwvdGg+DQogICAgICAgICAgPHRoPuS/ruaUueW7uuiurjwvdGg+DQogICAgICAgIDwvdHI+DQogICAgYDsNCg0KICAgIGZvciAoY29uc3QgaXRlbSBvZiB0YWJsZURhdGEpIHsNCiAgICAgIGh0bWxDb250ZW50ICs9IGANCiAgICAgIDx0cj4NCiAgICAgICAgPHRkPiR7aXRlbS5uYW1lfTwvdGQ+DQogICAgICAgIDx0ZD4ke2l0ZW0udHlwZX08L3RkPg0KICAgICAgICA8dGQ+JHtpdGVtLnN0YXR1c308L3RkPg0KICAgICAgICA8dGQ+JHtpdGVtLnN1Z2dlc3Rpb259PC90ZD4NCiAgICAgIDwvdHI+DQogICAgICBgOw0KICAgIH0NCg0KICAgIGh0bWxDb250ZW50ICs9ICc8L3RhYmxlPjwvYm9keT48L2h0bWw+JzsNCg0KICAgIC8vIOWIm+W7uiBibG9iIOWvueixoe+8jOW5tuS4uuWFtuiuvue9riBNSU1FIOexu+Wei+S4uiAndGV4dC9odG1sJw0KICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbaHRtbENvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L2h0bWwnIH0pOw0KICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQoNCiAgICAvLyDliJvlu7rkuIDkuKrkuLTml7bnmoQgYSDmoIfnrb7nlKjkuo7kuIvovb0NCiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgIGxpbmsuaHJlZiA9IHVybDsNCiAgICBsaW5rLmRvd25sb2FkID0gJ3JlcG9ydC5odG1sJzsgLy8g5oyH5a6a5LiL6L2955qE5paH5Lu25ZCNDQogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsgLy8g5bCGIGEg5qCH562+5re75Yqg5Yiw6aG16Z2i5LitDQogICAgbGluay5jbGljaygpOyAvLyDmqKHmi5/ngrnlh7sgYSDmoIfnrb4NCiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOyAvLyDnp7vpmaQgYSDmoIfnrb4NCiAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7IC8vIOmHiuaUviBVUkwg5a+56LGhDQogICAgfQ0KICAgIH0sDQogIH0sDQoNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/sample","sourcesContent":["<template>\r\n  <div class=\"case-set-management\">\r\n    <div>\r\n      <!-- 搜索栏 -->\r\n      <el-card id=\"search\">\r\n        <el-row>\r\n          <el-col :span=\"6\">\r\n            <el-input v-model=\"searchModel.name\" placeholder=\"任务集名\" clearable></el-input>\r\n            <el-button type=\"primary\" round icon=\"el-icon-search\" @click=\"searchSet\">查询</el-button>\r\n          </el-col>\r\n          <!-- 分页组件 -->\r\n\r\n          <!-- <el-pagination :current-page=\"searchModel.pageNo\" :page-sizes=\"[5, 10, 20, 50]\" :page-size=\"searchModel.pageSize\"\r\n              layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\" @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\" :small=\"true\" >\r\n            </el-pagination> -->\r\n          <el-col :span=\"10\" align=\"right\">\r\n            <template>\r\n              <div>\r\n                <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                  :current-page=\"pagination.currentPage\" :page-sizes=\"pagination.pageSizeOptions\"\r\n                  :page-size=\"pagination.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n                  :total=\"pagination.total\">\r\n                </el-pagination>\r\n              </div>\r\n            </template>\r\n          </el-col>\r\n          <el-col :span=\"6\" align=\"right\">\r\n            <el-button type=\"primary\" icon=\"el-icon-plus\" circle @click=\"handleAdd(null)\"></el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-card>\r\n\r\n      <!-- 任务集表格 -->\r\n      <el-card>\r\n        <!-- <el-table :data=\"setList\" stripe style=\"width: 100%\" :row-style=\"{ cursor: 'pointer' }\" @row-click=\"handleView\"> -->\r\n        <el-table v-loading=\"loading\" element-loading-text=\"任务处理中,请稍等\" :data=\"setList\" stripe style=\"width: 100%\" :row-style=\"{ cursor: 'pointer' }\"\r\n          @expand-change=\"handleView\">\r\n          <el-table-column type=\"expand\" @row-click=\"handleView\">\r\n            <template slot-scope=\"props\">\r\n              <!-- <el-table :data=\"caseSet\" stripe style=\"width: 80%\"> -->\r\n              <el-table :data=\"taskList\" :default-sort=\"{prop: 'CreatedAt', order: 'descending'}\" @sort-change=\"customSort\">\r\n                <el-table-column v-if=\"false\" prop=\"ID\" label=\"任务ID\"> </el-table-column>\r\n                <el-table-column prop=\"taskName\" label=\"任务名称\" width=\"80\"></el-table-column>\r\n                <!-- <el-table-column prop=\"taskPath\" label=\"任务路径\"width=\"85\">\r\n                  <template slot-scope=\"scope\">\r\n                      <tooltip effect=\"dark\" :content=\"scope.row.taskPath\" placement=\"top\">\r\n                      <span>{{ extractFileName(scope.row) }}</span>\r\n                      </tooltip>\r\n                 </template>\r\n                </el-table-column> -->\r\n                <el-table-column prop=\"sqlLength\" label=\"SQL条数\" width=\"60\">\r\n                  <template slot-scope=\"scope\">\r\n                      <div style=\"text-align: center;\">{{ scope.row.sqlLength }}</div>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"taskType\" label=\"任务类型\"></el-table-column>\r\n                <el-table-column prop=\"taskStatus\" label=\"任务状态\" sortable=\"custom\"></el-table-column>\r\n                <el-table-column v-if=\"false\" prop=\"setId\" label=\"业务ID\"> </el-table-column>\r\n                <el-table-column prop=\"CreatedAt\" label=\"创建时间\" :formatter=\"formateDate\" sortable=\"custom\"></el-table-column>\r\n                <el-table-column prop=\"UpdatedAt\" label=\"修改时间\" :formatter=\"formateDate\"></el-table-column>\r\n                <el-table-column prop=\"startTime\" label=\"开始时间\" :formatter=\"formateDate\"></el-table-column>\r\n                <el-table-column prop=\"endTime\" label=\"结束时间\" :formatter=\"formateDate\"></el-table-column>\r\n                <el-table-column label=\"操作\">\r\n                  <template slot-scope=\"scope\">\r\n                    <div class=\"button-row\">\r\n                      <el-tooltip class=\"item\" effect=\"dark\" content=\"开始\" placement=\"top\">\r\n                        <el-button type=\"primary\" class=\"start\" circle size=\"mini\" icon=\"el-icon-video-play\"\r\n                        @click=\"beginMatch(scope.row.ID,scope.row.sqlLength)\"></el-button>\r\n                      </el-tooltip>\r\n                      <el-tooltip class=\"item\" effect=\"dark\" content=\"暂停\" placement=\"top\">\r\n                        <el-button type=\"primary\" circle size=\"mini\" icon=\"el-icon-video-pause\"\r\n                        @click=\"PauseTask(scope.row.ID,scope.row.affairId)\"></el-button>\r\n                      </el-tooltip>\r\n                    </div>\r\n                    <div class=\"button-row\">\r\n                      <el-tooltip class=\"item\" effect=\"dark\" content=\"编辑\" placement=\"top\">\r\n                        <el-button type=\"primary\" circle size=\"mini\" icon=\"el-icon-edit\"\r\n                          @click=\"handleEditTask(scope.row.ID, scope.row.setId)\"></el-button>\r\n                        <!-- <el-button type=\"primary\" circle size=\"mini\" icon=\"el-icon-download\"></el-button> -->\r\n                      </el-tooltip>\r\n                      <el-tooltip class=\"item\" effect=\"dark\" content=\"SQL画像/语法匹配\" placement=\"bottom\">\r\n                        <el-button type=\"primary\" circle size=\"mini\" icon=\"el-icon-s-opportunity\"\r\n                          @click=\"jumphandelMatch(scope.row.ID)\">\r\n                        </el-button>\r\n                      </el-tooltip>\r\n                    </div>\r\n                    <div class=\"button-row\">\r\n                      <el-tooltip class=\"item\" effect=\"dark\" content=\"报告下载\" placement=\"bottom\">\r\n                        <el-button type=\"primary\" circle size=\"mini\" icon=\"el-icon-download\"\r\n                          @click=\"downloadResult(scope.row.ID)\">\r\n                        </el-button>\r\n                      </el-tooltip>\r\n                      <el-tooltip class=\"item\" effect=\"dark\" content=\"删除任务\" placement=\"bottom\">\r\n                        <el-button type=\"danger\" circle size=\"mini\" icon=\"el-icon-delete\"\r\n                          @click=\"deleteTask(scope.row.ID)\">\r\n                        </el-button>\r\n                      </el-tooltip>\r\n                    </div>\r\n\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <!-- 该任务分页栏 -->\r\n              <template>\r\n                <div>\r\n                  <el-pagination @size-change=\"handleTaskSizeChange\" @current-change=\"handleTaskCurrentChange\"\r\n                    :current-page=\"Taskpagination.currentPage\" :page-sizes=\"Taskpagination.pageSizeOptions\"\r\n                    :page-size=\"Taskpagination.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"Taskpagination.total\">\r\n                  </el-pagination>\r\n                </div>\r\n              </template>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column v-if=\"false\" prop=\"ID\" label=\"任务集ID\" width=\"120\"></el-table-column>\r\n          <el-table-column prop=\"setName\" label=\"任务集名称\" width=\"200\"></el-table-column>\r\n          <el-table-column prop=\"CreatedAt\" label=\"创建时间\" :formatter=\"formateDate\" width=\"200\"></el-table-column>\r\n          <el-table-column prop=\"UpdatedAt\" label=\"修改时间\" :formatter=\"formateDate\" width=\"200\"></el-table-column>\r\n          <el-table-column label=\"操作\" width=\"400\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tooltip class=\"item\" effect=\"dark\" content=\"新建任务\" placement=\"top\">\r\n                <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"small\" circle\r\n                  @click=\"handleAddTask(scope.row.ID)\"></el-button></el-tooltip>\r\n              <el-tooltip class=\"item\" effect=\"dark\" content=\"编辑任务集\" placement=\"top\">\r\n                <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"small\" circle\r\n                  @click=\"handleEditAffair(scope.row.ID)\"></el-button></el-tooltip>\r\n              <el-tooltip class=\"item\" effect=\"dark\" content=\"删除任务集\" placement=\"top\">\r\n                <el-button type=\"danger\" circle size=\"small\" icon=\"el-icon-delete\" @click=\"deleteSet(scope.row.ID)\">\r\n                </el-button></el-tooltip>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <!-- 新增任务集 -->\r\n        <el-dialog :visible.sync=\"dialogVisible\" title=\"新增任务集\" :before-close=\"handleCloseDialog\" width=\"60%\" center\r\n          :destroy-on-close=\"true\">\r\n          <el-form ref=\"addAffairRef\" :model=\"newAffair\" label-width=\"120px\">\r\n            <!-- <el-form-item label=\"任务集ID\" prop=\"id\">\r\n              <el-input v-model=\"newSet.id\"></el-input></el-form-item> -->\r\n            <el-form-item label=\"任务集名称\" prop=\"affairName\">\r\n              <el-input v-model=\"newAffair.affairName\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"任务集描述\" prop=\"affairDesc\">\r\n              <el-input v-model=\"newAffair.affairDesc\"></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"dialogVisible = false; selectRowId = null; selectTaskId = null\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"addSet\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n\r\n        <!-- 编辑任务集 -->\r\n        <el-dialog :visible.sync=\"editAffairVisible\" :title=\"title\" :before-close=\"handleCloseDialog\" width=\"60%\" center\r\n          :destroy-on-close=\"true\">\r\n          <el-form ref=\"editAffairRef\" :model=\"affairInfo\" label-width=\"120px\">\r\n            <!-- <el-form-item label=\"任务集ID\" prop=\"id\">\r\n              <el-input v-model=\"newSet.id\"></el-input></el-form-item> -->\r\n            <el-form-item label=\"任务集名称\" prop=\"setName\">\r\n              <el-input v-model=\"affairInfo.affairName\"></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"editAffairVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"editSet\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n\r\n        <!-- 添加/编辑任务对话框 -->\r\n        <el-dialog :visible.sync=\"dialogVisiblex\" :title=\"titlex\" :before-close=\"handleCloseDialog\" width=\"60%\" center\r\n          :destroy-on-close=\"true\">\r\n          <el-form ref=\"newTaskRef\" :model=\"newTask\" label-width=\"120px\" enctype=\"multipart/form-data\">\r\n            <!-- <el-form-item label=\"任务ID\" prop=\"id\">\r\n              <el-input v-model=\"newCaseForm.id\"></el-input></el-form-item> -->\r\n            <el-form-item label=\"任务名称\">\r\n              <el-input v-model=\"newTask.taskName\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"任务类型\">\r\n              <el-select v-model=\"newTask.taskType\" placeholder=\"请选择任务类型\">\r\n                <el-option :label=\"MYSQLDRAW\" :value=\"MYSQLDRAW\"></el-option>\r\n                <el-option :label=\"ORACLEDRAW\" :value=\"ORACLEDRAW\"></el-option>\r\n                <el-option :label=\"MYSQLADAPT\" :value=\"MYSQLADAPT\"></el-option>\r\n                <el-option :label=\"ORACLEADAPT\" :value=\"ORACLEADAPT\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"文件位置\">\r\n              <el-upload ref=\"upload\" class=\"upload-demo\" :auto-upload=\"false\" action=\"\" :data=\"{ taskID: uploadTaskID }\"\r\n                :before-upload=\"beforeUpload\"\r\n                :on-success=\"handleFileSuccess\"\r\n                :on-error=\"handleFileError\"\r\n                :on-change=\"handleChange\"\r\n                :on-remove=\"handleRemove\"\r\n                :file-list=\"fileList\"\r\n                :multiple=\"true\"\r\n                drag\r\n                >\r\n                <i class=\"el-icon-upload\"></i>\r\n                <div class=\"el-upload__text\">将文件拖拽到此处，或<em>点击上传</em></div>\r\n\r\n              </el-upload>\r\n            </el-form-item>\r\n          </el-form>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"dialogVisiblex = false; selectRowId = null; selectTaskId = null\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"addTask\">确 定</el-button>\r\n          </div>\r\n          </el-dialog>\r\n\r\n        <!-- 编辑任务对话框 -->\r\n        <el-dialog :visible.sync=\"dialogEditVisiblex\" :title=\"titlex\" :before-close=\"handleCloseDialog\" width=\"60%\" center\r\n          :destroy-on-close=\"true\">\r\n          <el-form ref=\"newTaskRef\" :model=\"newTask\" label-width=\"120px\" enctype=\"multipart/form-data\">\r\n            <el-form-item label=\"任务名称\">\r\n              <el-input v-model=\"newTask.taskName\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"任务类型\">\r\n              <el-select v-model=\"newTask.taskType\" placeholder=\"请选择任务类型\">\r\n                <el-option :label=\"MYSQLDRAW\" :value=\"MYSQLDRAW\"></el-option>\r\n                <el-option :label=\"ORACLEDRAW\" :value=\"ORACLEDRAW\"></el-option>\r\n                <el-option :label=\"MYSQLADAPT\" :value=\"MYSQLADAPT\"></el-option>\r\n                <el-option :label=\"ORACLEADAPT\" :value=\"ORACLEADAPT\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"文件位置\">\r\n              <el-upload ref=\"upload\" class=\"upload-demo\" :auto-upload=\"false\" :action=\"uploadUrl\" :data=\"{ taskID: uploadTaskID }\"\r\n                :on-success=\"handleFileSuccess\"\r\n                :on-error=\"handleFileError\"\r\n                :before-upload=\"beforeUpload\"\r\n                :limit=\"3\"\r\n                drag\r\n                multiple\r\n                >\r\n                <i class=\"el-icon-upload\"></i>\r\n                <div class=\"el-upload__text\">仅支持后缀为.sql的文件，将文件拖拽到此处，或<em>点击上传</em></div>\r\n\r\n              </el-upload>\r\n            </el-form-item>\r\n          </el-form>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"dialogEditVisiblex = false; selectRowId = null; selectTaskId = null\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"editTask\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n\r\n      </el-card>\r\n    </div>\r\n\r\n    <div style=\"margin-top: 30px;\"></div>\r\n    <!-- 任务统计 -->\r\n    <div>\r\n      <h3>任务统计</h3>\r\n      <el-row>\r\n        <el-col :span=\"6\">\r\n        <el-card style=\"height: 120px;background-color: ghostwhite;margin: 0 auto\">\r\n          <div>\r\n            <el-statistic :value=\"allTask\" title=\"全部任务\">\r\n              <template slot=\"formatter\">\r\n\r\n              </template>\r\n            </el-statistic>\r\n          </div>\r\n          </el-card>\r\n        </el-col>\r\n\r\n        <el-col :span=\"6\">\r\n          <el-card style=\"height: 120px;background-color: burlywood;margin: 0 auto\">\r\n          <div>\r\n            <el-statistic :value=\"culing\" :title=\"TASKEVALATE\">\r\n              <template slot=\"formatter\">\r\n\r\n              </template>\r\n            </el-statistic>\r\n          </div>\r\n        </el-card>\r\n        </el-col>\r\n\r\n        <el-col :span=\"6\">\r\n          <el-card style=\"height: 120px;background-color: powderblue; margin: 0 auto\">\r\n          <div>\r\n            <el-statistic :value=\"outed\" :title=\"TASKUNDO\">\r\n              <template slot=\"formatter\">\r\n\r\n              </template>\r\n            </el-statistic>\r\n          </div>\r\n          </el-card>\r\n        </el-col>\r\n\r\n        <el-col :span=\"6\">\r\n          <el-card style=\"height: 120px;background-color: mintcream;margin: 0 auto\">\r\n          <div>\r\n            <el-statistic :value=\"finished\" :title=\"TASKFINAL\">\r\n              <template slot=\"formatter\">\r\n\r\n              </template>\r\n            </el-statistic>\r\n          </div>\r\n        </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport day from 'dayjs'\r\nimport { time } from 'echarts';\r\nimport { mapGetters } from 'vuex'\r\nimport { Tooltip } from 'element-ui'\r\nimport { getToken } from '@/utils/auth';\r\n// import Statistic from 'element-ui';\r\n// Vue.use(Statistic)\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogEditVisiblex: false,\r\n      MYSQLDRAW:\"SQL画像 MySQL\",\r\n      ORACLEDRAW:\"SQL画像 Oracle\",\r\n      MYSQLADAPT:\"MySQL适配\",\r\n      ORACLEADAPT:\"Oracle适配\",\r\n      TASKFINAL:\"已完成\",\r\n      TASKEVALATE:\"评估中\",\r\n      TASKUNDO:\"未开始\",\r\n      TASKSTOP:\"已停止\",\r\n      SQLDRAWDELAY:15000,\r\n      SQLADAPTDELAY:15000,\r\n      loading: false,\r\n      uploadUrl: \"http://localhost:8000/api/upload\",\r\n      uploadTaskID: 1,\r\n      selectRowId: null,\r\n      selectTaskId: null,\r\n      fileList: [],\r\n      curRowId: null,\r\n      allTask: 10,\r\n      culing: 5,\r\n      outed: 2,\r\n      finished: 7,\r\n      newSet: {\r\n        folder: \"\"\r\n      },\r\n      queryParam: {\r\n        pagesize: 10,\r\n        pagenum: 1,\r\n      },\r\n      TaskqueryParam: {\r\n        pagesize: 10,\r\n        pagenum: 1,\r\n      },\r\n      pagination: {\r\n        currentPage: 1,\r\n        pageSizeOptions: [5, 10, 20, 30, 40],\r\n        pageSize: 10,\r\n        total: 0,\r\n        showSizeChanger: true,\r\n        showTotal: (total) => `共${total}条`,\r\n      },\r\n      Taskpagination: {\r\n        currentPage: 1,\r\n        pageSizeOptions: [5, 10, 20, 30, 40],\r\n        pageSize: 10,\r\n        total: 0,\r\n        showSizeChanger: true,\r\n        showTotal: (total) => `共${total}条`,\r\n      },\r\n      row: \"\",\r\n      dialogVisible: false,\r\n      dialogVisiblex: false,\r\n      editAffairVisible: false,\r\n\r\n      newAffair: {\r\n        affairName: \"\",\r\n        affairDesc: \"\"\r\n      },\r\n      newAffairForm: {\r\n        affairName: \"\",\r\n      },\r\n      newTask: {\r\n        taskName: \"\",\r\n        taskType: \"\",\r\n        taskLocal: \"\",\r\n        taskStatus: \"未开始\",\r\n        files: [],\r\n      },\r\n      dialogTitle: \"\",\r\n      title: \"\",\r\n      titlex: \"\",\r\n      caseSet: {\r\n\r\n      },\r\n      total: 0,\r\n      total1: 0,\r\n      searchModel: {\r\n        pagesize: 10,\r\n        pagenum: 1,\r\n      },\r\n      affairInfo: {\r\n        affairId: 0,\r\n        affairName: ''\r\n      },\r\n      // 任务集合列表数据\r\n      setList: [],\r\n      taskList: [],\r\n      tableCase: {},\r\n      like: true,\r\n      headers: {\r\n        username: '',\r\n        user_id: 0\r\n      },\r\n\r\n    };\r\n  },\r\n  components: {\r\n    Tooltip,\r\n  },\r\n\r\n  created() {\r\n    this.getSetList()\r\n    // this.getTaskList()\r\n    this.getTokenInfo()\r\n    // this.user_id = window.sessionStorage.getItem('user_id')\r\n    // this.headers = {\r\n    //   username: sessionStorage.getItem('username'),\r\n    //   user_id: sessionStorage.getItem('user_id')\r\n    // }\r\n    this.getTaskStatistics()\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getResData: 'data/getResData',  // 获取全局的 resData\r\n      getTaskData: 'task/getTaskData'  // 获取当前任务的画像数据\r\n    })\r\n  },\r\n  methods: {\r\n    getTokenInfo() {\r\n      const token = window.sessionStorage.getItem('token')\r\n      this.$http.get('parse/token', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`, // 将JWT令牌添加到请求头中\r\n          'Content-Type': 'application/json' // 设置请求头为JSON类型\r\n        }\r\n      })\r\n      .then(res => {\r\n        this.headers.username = res.data.username\r\n        this.headers.user_id = res.data.user_id\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching data:', error); \r\n      });\r\n    },\r\n    // 任务表格排序\r\n    customSort(column) {\r\n      const prop = column.prop\r\n      const order = column.order\r\n      if (prop === 'taskStatus') {\r\n        this.taskList.sort((a, b) => {\r\n          const statusOrder = {\r\n            '已完成': 1,\r\n            '评估中': 2,\r\n            '未开始': 3,\r\n            '任务出错':4,\r\n          }\r\n          const aOrder = statusOrder[a.taskStatus]\r\n          const bOrder = statusOrder[b.taskStatus]\r\n          if (order === 'descending') {\r\n            return bOrder - aOrder\r\n          } else {\r\n            return aOrder - bOrder\r\n          }\r\n        })\r\n      } else if (prop === 'CreatedAt') {\r\n        this.taskList.sort((a, b) => {\r\n        const aTime = Date.parse(a.CreatedAt)\r\n        const bTime = Date.parse(b.CreatedAt)\r\n        if (order === 'descending') {\r\n          return bTime - aTime\r\n        } else {\r\n          return aTime - bTime\r\n        }\r\n        })\r\n      }\r\n    },\r\n\r\n    handleChange(file, fileList) {\r\n      this.fileList = fileList\r\n    },\r\n\r\n    handleFileSuccess(response, file, fileList) {\r\n      console.log(\"文件上传成功\", response);\r\n      // 可以在这里处理上传成功后的逻辑，例如更新界面等\r\n    },\r\n    handleFileError(err) {\r\n      console.error(\"文件上传失败\", err);\r\n      // 可以在这里处理上传失败后的逻辑，例如提示用户重新上传等\r\n    },\r\n    beforeUpload(file) {\r\n      console.log(\"进入beforeUpload\")\r\n      if (!this.newTask.files) {\r\n        this.newTask.files = [];\r\n      }\r\n    this.newTask.files.push(file);\r\n    console.log(\"准备上传文件\", file);\r\n  \r\n    },\r\n    handleRemove(file, fileList) {\r\n      this.fileList = fileList;\r\n    },\r\n    // 获取任务集列表\r\n    async getSetList() {\r\n      const token = sessionStorage.getItem('token')\r\n      // console.log(\"=====>\", this.headers)\r\n      const { data: res } = await this.$http.get('sets', {\r\n        params: {\r\n          page_size: this.queryParam.pagesize,\r\n          page_num: this.queryParam.pagenum,\r\n        },\r\n        headers: {\r\n            'Authorization': `Bearer ${token}` // 在请求头中携带 token\r\n        }\r\n      })\r\n      // console.log(\"res===>\", res)\r\n      if (res.status !== 200) {\r\n        this.$message.error(res.message)\r\n      }\r\n\r\n      // console.log(res.data)\r\n      this.setList = res.data\r\n      this.pagination.total = res.total\r\n    },\r\n\r\n    // 获取任务集下的任务列表\r\n    async getTaskList(ID) {\r\n      const { data: res } = await this.$http.get(`task/list/${ID}`, {\r\n        params: { page_size: this.TaskqueryParam.pagesize, page_num: this.TaskqueryParam.pagenum },\r\n      })\r\n      // console.log(res)\r\n      if (res.status !== 200) return this.$message.error(res.message)\r\n      this.taskList = res.data\r\n      this.Taskpagination.total = res.total\r\n      // this.pagination.total = res.total\r\n    },\r\n    // 获取任务状态\r\n    async getTaskStatistics() {\r\n      const token = sessionStorage.getItem('token')\r\n      const res = await this.$http.get('task/statistic', {\r\n        headers: {\r\n              'Authorization': `Bearer ${token}` // 在请求头中携带 token\r\n          }\r\n      })\r\n      // console.log(\"test\")\r\n      // console.log(res)\r\n      if (res.status !== 200) return this.$message.error(res.message)\r\n      this.allTask = res.data.totalCount\r\n      this.culing = res.data.inProgressCount\r\n      this.outed = res.data.notStartedCount\r\n      this.finished = res.data.expiredCount\r\n    },\r\n\r\n    // 只直接显示文件路径中的文件名\r\n    extractFileName(row) {\r\n      const fixedPart = 'D:\\\\GraduationProject\\\\NPU-DatabaseMigration\\\\gin_GraduationProject\\\\web\\\\'\r\n      const fileName = row.taskPath.substring(fixedPart.length)\r\n      return fileName;\r\n    },\r\n\r\n    // 修改日期格式\r\n    formateDate(row, column) {\r\n      let data = row[column.property]\r\n      return data ? day(data).format('YYYY年MM月DD日 HH:mm') : '暂无'\r\n    },\r\n\r\n    // 删除任务集\r\n    deleteSet(id) {\r\n      // console.log(id)\r\n      this.$confirm('提示：请再次确认', '确定要删除该任务集吗？一旦删除，无法恢复', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      })\r\n        .then(async () => {\r\n          try {\r\n            const response = await this.$http.delete(`set/${id}`)\r\n            // console.log(response)\r\n            if (response.status === 200) {\r\n              this.$message.success('删除成功')\r\n              this.getSetList() // 删除成功后刷新用户列表\r\n              this.getTaskStatistics()\r\n              // this.getTaskList()\r\n            } else {\r\n              this.$message.error(response.data.message || '删除失败，请重试')\r\n            }\r\n          } catch (error) {\r\n            this.$message.error('删除失败，请重试')  // ????\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message.info('已取消删除')\r\n        });\r\n    },\r\n\r\n    // 更改分页\r\n    handleSizeChange(val) {\r\n      this.pagination.pageSize = val\r\n      // console.log(`每页 ${val} 条, pagesize`, this.pagination.pageSize);\r\n      this.queryParam.pagesize = this.pagination.pageSize\r\n      this.getSetList()\r\n      this.getTaskStatistics()\r\n\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pagination.currentPage = val\r\n      // console.log(`当前页: ${val}`, this.pagination.currentPage);\r\n      this.queryParam.pagenum = this.pagination.currentPage\r\n      this.getSetList()\r\n      this.getTaskStatistics()\r\n    },\r\n    // 更改任务分页\r\n    handleTaskSizeChange(val) {\r\n      this.Taskpagination.pageSize = val\r\n      // console.log(`每页 ${val} 条, pagesize`, this.pagination.pageSize);\r\n      this.TaskqueryParam.pagesize = this.Taskpagination.pageSize\r\n      this.getTaskList(this.curRowId)\r\n      this.getTaskStatistics()\r\n    },\r\n    handleTaskCurrentChange(val) {\r\n      this.Taskpagination.currentPage = val\r\n      // console.log(`当前页: ${val}`, this.pagination.currentPage);\r\n      this.TaskqueryParam.pagenum = this.Taskpagination.currentPage\r\n      this.getTaskList(this.curRowId)\r\n      this.getTaskStatistics()\r\n    },\r\n    //删除任务\r\n    async deleteTask(id,setid) {\r\n      const res =await this.$http.get(`task/info/${id}`)\r\n      // if (res.data.taskStatus==this.TASKFINAL|| res.data.taskStatus==this.TASKSTOP){\r\n      if (res.data.taskStatus !== this.TASKEVALATE) {\r\n\r\n        // console.log(id)\r\n        this.$confirm('提示：请再次确认', '确定要删除该任务吗？一旦删除，无法恢复', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n        })\r\n          .then(async () => {\r\n            try {\r\n              const response = await this.$http.delete(`task/${id}`)\r\n              // console.log(response)\r\n              if (response.status === 200) {\r\n                this.$message.success('删除成功')\r\n                this.getTaskList(setid) // 删除成功后刷新任务列表\r\n                this.getTaskStatistics()\r\n                // this.getTaskList()\r\n              } else {\r\n                this.$message.error(response.data.message || '删除失败，请重试')\r\n              }\r\n            } catch (error) {\r\n              this.$message.error('删除失败，请重试')\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.$message.info('已取消删除')\r\n          });\r\n          \r\n      }else{\r\n        return this.$message.error('任务正在进行，不可删除')\r\n      }\r\n      \r\n    },\r\n\r\n    // 搜索任务集\r\n    async searchSet() {\r\n      const token = sessionStorage.getItem('token')\r\n      // console.log(\"进入searchaffair函数\")\r\n      this.searchModel.pagenum = 1\r\n      this.pagination.currentPage = 1\r\n      this.searchModel.pagesize = this.pagination.pageSize\r\n      const { data: res } = await this.$http.get('set/search', {\r\n        params: {\r\n          page_size: this.searchModel.pagesize,\r\n          page_num: this.searchModel.pagenum,\r\n          set_name: this.searchModel.name,\r\n          // id: sessionStorage.getItem('user_id')\r\n        },\r\n        headers: {\r\n             'Authorization': `Bearer ${token}` // 在请求头中携带 token\r\n        }\r\n      })\r\n\r\n      // console.log(\"aaaa已经得到后端返回的数据：\", res)\r\n      if (res.status !== 200) return this.$message.error(res.message)\r\n      this.setList = res.data\r\n      this.pagination.total = res.total\r\n    },\r\n\r\n    // 编辑任务集合\r\n    async handleEditAffair(id) {\r\n      this.editAffairVisible = true\r\n      const { data: res } = await this.$http.get(`set/${id}`)\r\n      this.affairInfo = res.data\r\n      this.affairInfo.id = id\r\n    },\r\n    editSet() {\r\n      this.$refs.editAffairRef.validate(async (valid) => {\r\n        if (!valid) return this.$message.error('参数不符合要求，请重新输入')\r\n        const { data: res } = await this.$http.put(`set/${this.affairInfo.id}`, {\r\n          setName: this.affairInfo.affairName\r\n        })\r\n        if (res.status != 200) return this.$message.error(res.message)\r\n        this.editAffairVisible = false\r\n        this.$message.success('更新任务集信息成功')\r\n        this.getSetList()\r\n      })\r\n    },\r\n\r\n    jumphandelSql() {\r\n      this.$router.push('/test/result')\r\n    },\r\n    jumphandelDl() {\r\n      this.$router.push('/test/reportdl')\r\n    },\r\n    PauseTask(taskid,setid){\r\n      const res = this.$http.get(`task/pause/${taskid}`)\r\n      this.getSetList()\r\n      this.getTaskList(setid)\r\n      this.getTaskStatistics()\r\n    },\r\n    async beginMatch(id,linenum) {\r\n      this.loading = true\r\n      const res = await this.$http.get(`task/info/${id}`)\r\n      console.log(res.data)\r\n      console.log(\"任务类型为:\", res.data.taskType)\r\n      if (res.data.taskType === this.ORACLEDRAW||res.data.taskType === this.MYSQLDRAW) {\r\n        try {\r\n           const response = await Promise.race([\r\n            // this.$http.get(`sql/draw/${id}`),\r\n            this.$http.get(`sql/addtask/${id}`),\r\n            new Promise((_, reject) => setTimeout(() => reject(new Error('请求超时')), 15000*linenum)) // 设置6*linenum秒超时\r\n           ]);\r\n           if (response.status === 200) {\r\n             this.loading = false\r\n           }\r\n           this.getSetList()\r\n           this.getTaskList()\r\n           this.getTaskStatistics()\r\n           console.log(\"get task:\",response)\r\n        } catch (error) {\r\n          console.error(\"获取sql画像分析结果失败:\", error)\r\n          this.$http.post(`sql/editstatus/${id}`)\r\n        }\r\n      }\r\n      else{\r\n        try{\r\n          console.log(\"time\",)\r\n          const response = await Promise.race([\r\n            // this.$http.get(`sql/adapt/${id}`),\r\n            this.$http.get(`sql/addtask/${id}`),\r\n            new Promise((_, reject) => setTimeout(() => reject(new Error('请求超时')), 15000*linenum)) // 设置10秒超时\r\n          ]);\r\n          console.log(\"Oracle适配的响应\",response)\r\n          if (response.status === 200) {\r\n             this.loading = false\r\n           }\r\n           this.getSetList()\r\n           this.getTaskList()\r\n           this.getTaskStatistics()\r\n        }catch (error) {\r\n          this.$message.error(error)\r\n          console.error(\"获取sql适配分析结果失败:\", error)\r\n          this.$http.post(`sql/editstatus/${id}`)\r\n        }\r\n        \r\n      }\r\n    },\r\n\r\n    async jumphandelMatch(id) {\r\n      const res = await this.$http.get(`task/info/${id}`)\r\n      console.log(\"任务状态为：\", res.data)\r\n      // const taskData = this.$store.getters['task/getTaskData'](id)\r\n      // this.$router.push('/test/match')\r\n      if(res.data.taskType==this.ORACLEDRAW||res.data.taskType==this.MYSQLDRAW){\r\n          if (res.data.taskStatus === this.TASKFINAL) {//页面名称修改\r\n            this.$router.push({name: 'result', params: {taskId: id,taskType:res.data.taskType}})\r\n          } else if (res.data.taskStatus === '未开始') {\r\n            return this.$message.error('任务未开始，不可跳转查看结果')\r\n          }\r\n      }else{\r\n          if (res.data.taskStatus === this.TASKFINAL) {//页面名称为适配的结果修改\r\n            this.$router.push({name: 'match', params: {taskId: id}})\r\n          } else if (res.data.taskStatus === '未开始') {\r\n            return this.$message.error('任务未开始，不可跳转查看结果')\r\n          }\r\n      }\r\n\r\n      // 获取当前任务的任务数据\r\n      const taskData = this.$store.getters['task/getTaskData'](id)\r\n      console.log(\"test\",taskData)\r\n      // if (!taskData) {\r\n      if (1) {\r\n        const response = await this.$http.get(`task/result/${id}`)\r\n        const resultData = JSON.parse(response.data.taskResult)\r\n        await this.$store.dispatch('task/setTaskData', { taskId: id, data: resultData})\r\n      }\r\n    },\r\n    // newTask() {\r\n    //   this.$router.push(\"/test/task\");\r\n    // },\r\n    // openFile() {\r\n    //   this.$refs.folderInput.click();\r\n    // },\r\n    // changeFile(e) {\r\n    //   // const folderPath = e.target.files[0].path; // 获取选择的文件夹路径\r\n    //   const file = e.target.files[0]\r\n    //   console.log(\"拿到的文件为：\", file)\r\n    //   this.newTask.taskLocal = file\r\n    //   // this.newSet.folder = folderPath; // 将路径绑定到数据对象中的属性\r\n    // },\r\n    getCasesById(id) {\r\n      this.getCaseList(id);\r\n    },\r\n    addCase() {\r\n      this.dialogTitle = \"添加任务\";\r\n    },\r\n    handleAdd() {\r\n      this.dialogTitle = \"添加业务合\";\r\n      this.caseSet = {\r\n        id: \"\",\r\n        name: \"\",\r\n        path: \"\",\r\n        cases: [],\r\n      };\r\n      this.dialogVisible = true;\r\n    },\r\n    handleAddTask(id) {\r\n      this.dialogTitlex = \"添加任务\";\r\n      this.dialogVisiblex = true;\r\n      this.selectRowId = id;\r\n    },\r\n    async handleEditTask(id, affairid) {\r\n      const res =await this.$http.get(`task/info/${id}`)\r\n      if (res.data.taskStatus==this.TASKFINAL||res.data.taskStatus==this.TASKSTOP){\r\n        this.title = \"修改任务\";\r\n        this.dialogEditVisiblex = true;\r\n        this.selectRowId = affairid;\r\n        this.selectTaskId = id\r\n      }else if (res.data.taskStatus==this.TASKEVALATE){\r\n        return this.$message.error('任务正在进行，不可编辑')\r\n      }\r\n    },\r\n\r\n    // 业务合表格行点击事件处理函数\r\n    handleView(row) {\r\n      // console.log(\"检测执行handleview\")\r\n      // console.log(row.ID)\r\n      this.curRowId = row.ID\r\n      this.getTaskList(row.ID)\r\n      this.getTaskStatistics()\r\n    },\r\n    // 选择文件夹按钮点击事件处理函数\r\n    handleSelectFolder() {\r\n      const fu = document.getElementById(\"open\");\r\n      if (fu == null) return;\r\n      this.textarea = fu.files[0].name;\r\n      // console.log(fu.files[0].name);\r\n    },\r\n\r\n    // 关闭添加/编辑业务合对话框前的钩子函数\r\n    handleCloseDialog(done) {\r\n      this.$confirm(\"确认关闭？\")\r\n        .then(() => {\r\n          this.selectRowId = null\r\n          this.selectTaskId = null\r\n          done();\r\n        })\r\n        .catch(() => { });\r\n    },\r\n\r\n    // 确定添加/编辑任务集合对话框按钮点击事件处理函数\r\n    addSet() {\r\n      this.$refs.addAffairRef.validate(async (valid) => {\r\n        const token = sessionStorage.getItem('token')\r\n        if (!valid) return this.$message.error('参数不符合要求，请重新输入')\r\n        const { data: res } = await this.$http.post('set/add', {\r\n          setName: this.newAffair.affairName,\r\n          setDesc: this.newAffair.affairDesc,\r\n          // userId: parseInt(sessionStorage.getItem('user_id'), 10)\r\n        }, {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}` // 在请求头中携带 token\r\n        }})\r\n        if (res.status != 200) return this.$message.error(res.message)\r\n        this.$refs.addAffairRef.resetFields()\r\n        this.dialogVisible = false\r\n        this.$message.success('添加成功')\r\n        this.getSetList()\r\n        this.getTaskStatistics()\r\n      })\r\n    },\r\n\r\n    //添加任务\r\n    // addTask() {\r\n    //   // this.$refs.upload.submit();\r\n    //   this.$refs.newTaskRef.validate(async (valid) => {\r\n    //     if (!valid) return this.$message.error('参数不符合要求，请重新输入')\r\n    //     if (this.selectTaskId == null) {\r\n    //       const { data: res } = await this.$http.post('task/add', {\r\n    //         SetId: this.selectRowId,\r\n    //         TaskName: this.newTask.taskName,\r\n    //         TaskPath: this.newTask.taskLocal,\r\n    //         TaskType: this.newTask.taskType,\r\n    //         TaskStatus: this.newTask.taskStatus,\r\n    //       })\r\n    //     if (res.status === 200) {\r\n    //       this.uploadTaskID = res.data.ID\r\n    //       console.log(\"上传任务ID为：\", this.uploadTaskID)\r\n    //       await this.$nextTick()\r\n    //       this.$refs.upload.submit()\r\n    //       this.$message.success('添加成功')\r\n    //     } else {\r\n    //       this.$message.error(res.message)\r\n    //     }\r\n          \r\n    //       this.$refs.newTaskRef.resetFields();\r\n    //       this.dialogVisiblex = false\r\n    //       // console.log(this.selectRowId)\r\n    //       this.getTaskList(this.selectRowId)\r\n    //       this.getTaskStatistics()\r\n    //     }\r\n    //     // else {\r\n    //     //   const id = this.selectTaskId\r\n    //     //   this.selectTaskId = null\r\n    //     //   const { data: res } = await this.$http.put(`task/${id}`, {\r\n    //     //     SetId: this.selectRowId,\r\n    //     //     TaskName: this.newTask.taskName,\r\n    //     //     // TaskPath: this.newTask.taskLocal,\r\n    //     //     TaskType: this.newTask.taskType,\r\n    //     //     TaskStatus: this.newTask.taskStatus,\r\n    //     //   })\r\n\r\n    //     //   console.log(\"修改任务\", this.$refs.upload.uploadFiles.length)\r\n    //     //   if (this.$refs.upload.uploadFiles.length === 1) {\r\n    //     //     this.uploadTaskID = id\r\n    //     //     console.log(\"bfdjsj上传任务ID为：\", this.uploadTaskID)\r\n    //     //     await this.$nextTick()\r\n    //     //     this.$refs.upload.submit()\r\n    //     //   }\r\n    //     //   // if (res.status != 200) return this.$message.error(res.message)\r\n    //     //   // this.$nextTick(() => {\r\n    //     //   //   if (this.$refs.newTaskRef) {\r\n\r\n    //     //   //   }\r\n    //     //   // });\r\n    //     //   this.$refs.newTaskRef.resetFields();\r\n    //     //   this.dialogVisiblex = false\r\n    //     //   this.$message.success('修改成功')\r\n    //     //   // console.log(this.selectRowId)\r\n    //     //   this.getTaskList(this.selectRowId)\r\n    //     //   this.getTaskStatistics()\r\n    //     //   this.selectRowId = null\r\n    //     // }\r\n    //   })\r\n    // },\r\n\r\n    async addTask() {\r\n      this.$refs.newTaskRef.validate(async (valid) => {\r\n      if (!valid) return this.$message.error('参数不符合要求，请重新输入');\r\n\r\n    // 检查是新任务还是已有任务\r\n    if (this.selectTaskId == null) {\r\n      const { data: res } = await this.$http.post('task/add', {\r\n        SetId: this.selectRowId,\r\n        TaskName: this.newTask.taskName,\r\n        TaskPath: this.newTask.taskLocal,\r\n        TaskType: this.newTask.taskType,\r\n        TaskStatus: this.newTask.taskStatus\r\n      });\r\n\r\n      if (res.status === 200) {\r\n        this.uploadTaskID = res.data.ID;\r\n        console.log(\"上传任务ID为：\", this.uploadTaskID);\r\n        await this.$nextTick();\r\n\r\n        const formData = new FormData();\r\n        formData.append('taskID', this.uploadTaskID);\r\n\r\n        \r\n        console.log(\"看看有没有文件\",this.fileList)\r\n        // 将每个文件附加到 formData\r\n        this.fileList.forEach((file) => {\r\n          formData.append('files', file.raw);\r\n        });\r\n\r\n        try {\r\n          const response = await fetch(this.uploadUrl, {\r\n            method: 'POST',\r\n            body: formData\r\n          });\r\n          const result = await response.json();\r\n          console.log(result);\r\n\r\n          if (result.status === 200 || result.status === 3006) {\r\n            this.$message.success(result.message);\r\n          } else {\r\n            this.$message.error(result.message);\r\n          }\r\n        \r\n        } catch (error) {\r\n          console.error('Error:', error);\r\n          this.$message.error('上传失败');\r\n        }\r\n\r\n        this.taskList = []\r\n        this.$refs.newTaskRef.resetFields();\r\n        this.dialogVisiblex = false;\r\n        this.getTaskList(this.selectRowId);\r\n        this.getTaskStatistics();\r\n      } else {\r\n        this.$message.error(res.message);\r\n      }\r\n    }\r\n  });\r\n},\r\n\r\n\r\n    async editTask(){\r\n      const id = this.selectTaskId\r\n      this.selectTaskId = null\r\n      const { data: res } = await this.$http.put(`task/${id}`, {\r\n      SetId: this.selectRowId,\r\n      TaskName: this.newTask.taskName,\r\n      // TaskPath: this.newTask.taskLocal,\r\n      TaskType: this.newTask.taskType,\r\n      TaskStatus: this.newTask.taskStatus,\r\n      })\r\n\r\n      console.log(\"修改任务\", this.$refs.upload.uploadFiles.length)\r\n      if (this.$refs.upload.uploadFiles.length === 1) {\r\n          this.uploadTaskID = id\r\n          console.log(\"bfdjsj上传任务ID为：\", this.uploadTaskID)\r\n          await this.$nextTick()\r\n          this.$refs.upload.submit()\r\n        }\r\n        \r\n        this.$refs.newTaskRef.resetFields();\r\n        this.dialogEditVisiblex = false\r\n        this.$message.success('修改成功')\r\n          // console.log(this.selectRowId)\r\n        this.getTaskList(this.selectRowId)\r\n        this.getTaskStatistics()\r\n        this.selectRowId = null\r\n    },\r\n    \r\n    async downloadResult(id) {\r\n      // window.location.href = `http://localhost:8000/api/download/${id}`\r\n     // 调用接口获取报告数据\r\n     const res = await this.$http.get(`/download/${id}`);\r\n\r\n    if (res.data.status !== 200) {\r\n      this.$message.error(res.data.message)\r\n    } else {\r\n    const taskResult = JSON.parse(res.data.taskResult)\r\n    \r\n    const tableData = Object.values(taskResult)\r\n    console.log(\"tableData\", tableData)\r\n      // 使用获取到的数据动态生成 HTML 内容\r\n    let htmlContent = `\r\n    <html>\r\n      <head>\r\n        <title>${res.data.taskName}</title>\r\n        <style>\r\n        body {\r\n    font-family: Arial, sans-serif;\r\n    margin: 0;\r\n    padding: 20px;\r\n    background-color: #f8f8f8;\r\n  }\r\n  h1, h2 {\r\n    color: #333;\r\n  }\r\n  table {\r\n    border-collapse: collapse;\r\n    width: 100%;\r\n    background-color: #fff;\r\n    margin-top: 20px;\r\n  }\r\n  th, td {\r\n    border: 1px solid #ddd;\r\n    padding: 8px;\r\n    text-align: left;\r\n  }\r\n  th {\r\n    background-color: #f2f2f2;\r\n  }\r\n  tr:nth-child(even) {\r\n    background-color: #f2f2f2;\r\n  }\r\n  tr:hover {\r\n    background-color: #ddd;\r\n  }\r\n          </style>\r\n      </head>\r\n    <body>\r\n      <div style=\"margin-bottom: 20px;\">\r\n  <h1 style=\"text-align: center; font-size: 28px; color: #333;\">${res.data.taskName}任务的详情</h1>\r\n  <p style=\"font-size: 20px;\">任务类型：${res.data.taskType}</p>\r\n  <p style=\"font-size: 20px;\">该任务共含有${res.data.sqlLength}条SQL语句</p>\r\n  <p style=\"font-size: 20px;\">适配结果如下：</p>\r\n</div>\r\n      <table>\r\n        <tr>\r\n          <th>对象名</th>\r\n          <th>对象类型</th>\r\n          <th>CBase实现情况</th>\r\n          <th>修改建议</th>\r\n        </tr>\r\n    `;\r\n\r\n    for (const item of tableData) {\r\n      htmlContent += `\r\n      <tr>\r\n        <td>${item.name}</td>\r\n        <td>${item.type}</td>\r\n        <td>${item.status}</td>\r\n        <td>${item.suggestion}</td>\r\n      </tr>\r\n      `;\r\n    }\r\n\r\n    htmlContent += '</table></body></html>';\r\n\r\n    // 创建 blob 对象，并为其设置 MIME 类型为 'text/html'\r\n    const blob = new Blob([htmlContent], { type: 'text/html' });\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    // 创建一个临时的 a 标签用于下载\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = 'report.html'; // 指定下载的文件名\r\n    document.body.appendChild(link); // 将 a 标签添加到页面中\r\n    link.click(); // 模拟点击 a 标签\r\n    document.body.removeChild(link); // 移除 a 标签\r\n    URL.revokeObjectURL(url); // 释放 URL 对象\r\n    }\r\n    },\r\n  },\r\n\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n#search .el-input {\r\n  width: 200px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.el-dialog__wrapper {\r\n  z-index: 1000;\r\n}\r\n\r\n.el-table th:last-child .cell {\r\n  text-align: center;\r\n}\r\n\r\n.el-table-column--expand {\r\n  width: 50px !important;\r\n  text-align: center;\r\n}\r\n\r\n.el-button--danger {\r\n  background-color: #ff4d4f;\r\n  border-color: #ff4d4f;\r\n}\r\n\r\n.el-table__expand-icon {\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.el-form-item__label {\r\n  width: 80px;\r\n  text-align: right;\r\n  padding-right: 10px;\r\n}\r\n\r\n.el-button--small {\r\n  padding: 5px 12px;\r\n}\r\n\r\n.like {\r\n  cursor: pointer;\r\n  font-size: 25px;\r\n  display: inline-block;\r\n}\r\n\r\n.button-row {\r\n  display: flex;\r\n  // justify-content: space-around;;\r\n  margin-right: 5px;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.upload-demo {\r\n  margin-top: 20px;\r\n}\r\n\r\n</style>\r\n"]}]}