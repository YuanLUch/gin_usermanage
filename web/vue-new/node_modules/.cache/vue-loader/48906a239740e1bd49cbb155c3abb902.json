{"remainingRequest":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\src\\views\\sys\\user.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\src\\views\\sys\\user.vue","mtime":1701483470000},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1702824123341},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\babel-loader\\lib\\index.js","mtime":1702824125233},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1702824123341},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\vue-loader\\lib\\index.js","mtime":1702824125775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1c2VyQXBpIGZyb20gIkAvYXBpL3VzZXJNYW5hZ2UiOwovLyBpbXBvcnQgcm9sZUFwaSBmcm9tICJAL2FwaS9yb2xlTWFuYWdlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICB2YXIgY2hlY2tFbWFpbCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgdmFyIHJlZyA9CiAgICAgICAgL15bQS1aYS16MC05XSsoW19cLl1bQS1aYS16MC05XSspKkAoW0EtWmEtejAtOVwtXStcLikrW0EtWmEtel17Miw2fSQvOwogICAgICBpZiAoIXJlZy50ZXN0KHZhbHVlKSkgewogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoIumCrueuseagvOW8j+mUmeivryIpKTsKICAgICAgfQogICAgICBjYWxsYmFjaygpOwogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGZvcm1MYWJlbFdpZHRoOiAiMTMwcHgiLAogICAgICB1c2VyRm9ybToge30sCiAgICAgIHRpdGxlOiAiIiwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICB0b3RhbDogMCwKICAgICAgc2VhcmNoTW9kZWw6IHsKICAgICAgICBwYWdlTm86IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICB9LAogICAgICB1c2VyTGlzdDogW10sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXnlKjmiLflkI0iLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbWluOiAzLAogICAgICAgICAgICBtYXg6IDIwLAogICAgICAgICAgICBtZXNzYWdlOiAi6ZW/5bqm5ZyoIDMg5YiwIDIwIOS4quWtl+espiIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+iuvue9rueZu+W9leWvhueggSIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgewogICAgICAgICAgICBtaW46IDYsCiAgICAgICAgICAgIG1heDogMTUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLplb/luqblnKggNiDliLAgMTUg5Liq5a2X56ymIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIGVtYWlsOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl55S15a2Q6YKu5Lu2IiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgICB7IHZhbGlkYXRvcjogY2hlY2tFbWFpbCwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZWxldGVVc2VyKHVzZXIpIHsKICAgICAgdGhpcy4kY29uZmlybShg5oKo56Gu6K6k5Yig6Zmk55So5oi3JHt1c2VyLnVzZXJuYW1lfT9gLCAi5o+Q56S6IiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdXNlckFwaS5kZWxldGVVc2VyQnlJZCh1c2VyLmlkKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlt7Llj5bmtojliKDpmaQiLAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgc2F2ZVVzZXIoKSB7CiAgICAgIC8v6Kem5Y+R6KGo5Y2V6aqM6K+BCiAgICAgIHRoaXMuJHJlZnMudXNlckZvcm1SZWYudmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAvL+aPkOS6pOe7meWQjuWPsAogICAgICAgICAgdXNlckFwaS5zYXZlVXNlcih0aGlzLnVzZXJGb3JtKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAvL+aIkOWKn+aPkOekugogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8v5YWz6Zet5a+56K+d5qGGCiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgLy/liLfmlrDmlbDmja7mmL7npLoKICAgICAgICAgICAgdGhpcy5nZXRVc2VyTGlzdCgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIua3u+WKoOeUqOaIt+Wksei0pSIpOwogICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCEhIik7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjbGVhckZvcm0oKSB7CiAgICAgIHRoaXMudXNlckZvcm0gPSB7fTsKICAgICAgdGhpcy4kcmVmcy51c2VyRm9ybVJlZi5jbGVhclZhbGlkYXRlKCk7CiAgICB9LAogICAgb3BlbkVkaXRVSShpZCkgewogICAgICBpZiAoaWQgPT0gbnVsbCkgewogICAgICAgIHRoaXMudGl0bGUgPSAi5paw5aKe55So5oi3IjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRpdGxlID0gIuS/ruaUueeUqOaItyI7CiAgICAgICAgLy/moLnmja5pZOafpeivoui/meS4gOihjOaVsOaNrgogICAgICAgIHVzZXJBcGkuZ2V0VXNlckJ5SWQoaWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLnVzZXJGb3JtID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHBhZ2VTaXplKSB7CiAgICAgIHRoaXMuc2VhcmNoTW9kZWwucGFnZVNpemUgPSBwYWdlU2l6ZTsKICAgICAgdGhpcy5nZXRVc2VyTGlzdCgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UocGFnZU5vKSB7CiAgICAgIHRoaXMuc2VhcmNoTW9kZWwucGFnZU5vID0gcGFnZU5vOwogICAgICB0aGlzLmdldFVzZXJMaXN0KCk7CiAgICB9LAogICAgZ2V0VXNlckxpc3QoKSB7CiAgICAgIHVzZXJBcGkuZ2V0VXNlckxpc3QodGhpcy5zZWFyY2hNb2RlbCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLnVzZXJMaXN0ID0gcmVzcG9uc2UuZGF0YS5yb3dzOwogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsOwogICAgICB9KTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRVc2VyTGlzdCgpOwogIH0sCn07Cg=="},{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user.vue","sourceRoot":"src/views/sys","sourcesContent":["/* eslint-disable */\n\n<template>\n  <div>\n    <!-- 搜索栏 -->\n    <el-card id=\"search\">\n      <el-row>\n        <el-col :span=\"20\">\n          <el-input\n            v-model=\"searchModel.username\"\n            placeholder=\"用户名\"\n            clearable\n          ></el-input>\n          <el-input\n            v-model=\"searchModel.phone\"\n            placeholder=\"电话\"\n            clearable\n          ></el-input>\n          <el-button\n            type=\"primary\"\n            round\n            icon=\"el-icon-search\"\n            @click=\"getUserList\"\n            >查询</el-button\n          >\n        </el-col>\n        <el-col :span=\"4\" align=\"right\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-plus\"\n            circle\n            @click=\"openEditUI(null)\"\n          ></el-button>\n        </el-col>\n      </el-row>\n    </el-card>\n\n    <!-- 结果列表 -->\n    <el-card>\n      <el-table :data=\"userList\" stripe style=\"width: 100%\">\n        <el-table-column label=\"#\" width=\"80\">\n          <template slot-scope=\"scope\">\n            <!--(pageNo-1) * pageSize + index + 1 -->\n            {{\n              (searchModel.pageNo - 1) * searchModel.pageSize + scope.$index + 1\n            }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"username\" label=\"用户名\" width=\"120\">\n        </el-table-column>\n        <el-table-column prop=\"phone\" label=\"电话\" width=\"180\">\n        </el-table-column>\n        <el-table-column prop=\"status\" label=\"权限\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-tag v-if=\"scope.row.status == 1\">管理员</el-tag>\n            <el-tag v-else type=\"warning\">用户</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"email\" label=\"电子邮件\"> </el-table-column>\n        <el-table-column label=\"操作\" width=\"180\">\n          <template slot-scope=\"scope\">\n            <el-button\n              @click=\"openEditUI(scope.row.id)\"\n              type=\"primary\"\n              icon=\"el-icon-edit\"\n              circle\n              size=\"mini\"\n            ></el-button>\n            <el-button\n              @click=\"deleteUser(scope.row)\"\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              circle\n              size=\"mini\"\n            ></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <!-- 分页组件 -->\n    <el-pagination\n      :current-page=\"searchModel.pageNo\"\n      :page-sizes=\"[5, 10, 20, 50]\"\n      :page-size=\"searchModel.pageSize\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"total\"\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n    >\n    </el-pagination>\n\n    <!-- 用户信息编辑对话框 -->\n    <el-dialog\n      @close=\"clearForm\"\n      :title=\"title\"\n      :visible.sync=\"dialogFormVisible\"\n    >\n      <el-form :model=\"userForm\" ref=\"userFormRef\" :rules=\"rules\">\n        <el-form-item\n          label=\"用户名\"\n          prop=\"username\"\n          :label-width=\"formLabelWidth\"\n        >\n          <el-input v-model=\"userForm.username\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item\n          v-if=\"userForm.id == null || userForm.id == undefined\"\n          label=\"登录密码\"\n          prop=\"password\"\n          :label-width=\"formLabelWidth\"\n        >\n          <el-input\n            v-model=\"userForm.password\"\n            autocomplete=\"off\"\n            type=\"password\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"联系电话\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"userForm.phone\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"管理员权限\" :label-width=\"formLabelWidth\">\n          <el-switch\n            v-model=\"userForm.status\"\n            :active-value=\"1\"\n            :inactive-value=\"0\"\n          >\n          </el-switch>\n        </el-form-item>\n        <el-form-item\n          label=\"电子邮件\"\n          prop=\"email\"\n          :label-width=\"formLabelWidth\"\n        >\n          <el-input v-model=\"userForm.email\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"saveUser\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport userApi from \"@/api/userManage\";\n// import roleApi from \"@/api/roleManage\";\nexport default {\n  data() {\n    var checkEmail = (rule, value, callback) => {\n      var reg =\n        /^[A-Za-z0-9]+([_\\.][A-Za-z0-9]+)*@([A-Za-z0-9\\-]+\\.)+[A-Za-z]{2,6}$/;\n      if (!reg.test(value)) {\n        return callback(new Error(\"邮箱格式错误\"));\n      }\n      callback();\n    };\n    return {\n      formLabelWidth: \"130px\",\n      userForm: {},\n      title: \"\",\n      dialogFormVisible: false,\n      total: 0,\n      searchModel: {\n        pageNo: 1,\n        pageSize: 10,\n      },\n      userList: [],\n      rules: {\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n          {\n            min: 3,\n            max: 20,\n            message: \"长度在 3 到 20 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        password: [\n          { required: true, message: \"请设置登录密码\", trigger: \"blur\" },\n          {\n            min: 6,\n            max: 15,\n            message: \"长度在 6 到 15 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        email: [\n          { required: true, message: \"请输入电子邮件\", trigger: \"blur\" },\n          { validator: checkEmail, trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  methods: {\n    deleteUser(user) {\n      this.$confirm(`您确认删除用户${user.username}?`, \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          userApi.deleteUserById(user.id).then((response) => {\n            this.$message({\n              type: \"success\",\n              message: response.message,\n            });\n            this.getUserList();\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\",\n          });\n        });\n    },\n    saveUser() {\n      //触发表单验证\n      this.$refs.userFormRef.validate((valid) => {\n        if (valid) {\n          //提交给后台\n          userApi.saveUser(this.userForm).then((response) => {\n            //成功提示\n            this.$message({\n              message: response.message,\n              type: \"success\",\n            });\n            //关闭对话框\n            this.dialogFormVisible = false;\n            //刷新数据显示\n            this.getUserList();\n          });\n        } else {\n          this.$message.error(\"添加用户失败\");\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    clearForm() {\n      this.userForm = {};\n      this.$refs.userFormRef.clearValidate();\n    },\n    openEditUI(id) {\n      if (id == null) {\n        this.title = \"新增用户\";\n      } else {\n        this.title = \"修改用户\";\n        //根据id查询这一行数据\n        userApi.getUserById(id).then((response) => {\n          this.userForm = response.data;\n        });\n      }\n      this.dialogFormVisible = true;\n    },\n    handleSizeChange(pageSize) {\n      this.searchModel.pageSize = pageSize;\n      this.getUserList();\n    },\n    handleCurrentChange(pageNo) {\n      this.searchModel.pageNo = pageNo;\n      this.getUserList();\n    },\n    getUserList() {\n      userApi.getUserList(this.searchModel).then((response) => {\n        this.userList = response.data.rows;\n        this.total = response.data.total;\n      });\n    },\n  },\n  created() {\n    this.getUserList();\n  },\n};\n</script>\n\n<style>\n#search .el-input {\n  width: 200px;\n  margin-right: 10px;\n}\n.el-dialog .el-input {\n  width: 80%;\n}\n</style>\n"]}]}