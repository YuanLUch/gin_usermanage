{"remainingRequest":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\babel-loader\\lib\\index.js!D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\src\\permission.js","dependencies":[{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\src\\permission.js","mtime":1709178889702},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\babel.config.js","mtime":1701483760000},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1702824123341},{"path":"D:\\GraduationProject\\NPU-DatabaseMigration\\vue-new\\node_modules\\babel-loader\\lib\\index.js","mtime":1702824125233}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovR3JhZHVhdGlvblByb2plY3QvTlBVLURhdGFiYXNlTWlncmF0aW9uL3Z1ZS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9HcmFkdWF0aW9uUHJvamVjdC9OUFUtRGF0YWJhc2VNaWdyYXRpb24vdnVlLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnLi9zdG9yZSc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICducHJvZ3Jlc3MnOyAvLyBwcm9ncmVzcyBiYXIKaW1wb3J0ICducHJvZ3Jlc3MvbnByb2dyZXNzLmNzcyc7IC8vIHByb2dyZXNzIGJhciBzdHlsZQppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7IC8vIGdldCB0b2tlbiBmcm9tIGNvb2tpZQppbXBvcnQgZ2V0UGFnZVRpdGxlIGZyb20gJ0AvdXRpbHMvZ2V0LXBhZ2UtdGl0bGUnOwpOUHJvZ3Jlc3MuY29uZmlndXJlKHsKICBzaG93U3Bpbm5lcjogZmFsc2UKfSk7IC8vIE5Qcm9ncmVzcyBDb25maWd1cmF0aW9uCgp2YXIgd2hpdGVMaXN0ID0gWycvbG9naW4nXTsgLy8gbm8gcmVkaXJlY3Qgd2hpdGVsaXN0Cgpyb3V0ZXIuYmVmb3JlRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgbmV4dCgpOwogICAgICAgICAgLy8gc3RhcnQgcHJvZ3Jlc3MgYmFyCiAgICAgICAgICAvLyBOUHJvZ3Jlc3Muc3RhcnQoKQoKICAgICAgICAgIC8vIC8vIHNldCBwYWdlIHRpdGxlCiAgICAgICAgICAvLyBkb2N1bWVudC50aXRsZSA9IGdldFBhZ2VUaXRsZSh0by5tZXRhLnRpdGxlKQoKICAgICAgICAgIC8vIC8vIGRldGVybWluZSB3aGV0aGVyIHRoZSB1c2VyIGhhcyBsb2dnZWQgaW4KICAgICAgICAgIC8vIGNvbnN0IGhhc1Rva2VuID0gZ2V0VG9rZW4oKQoKICAgICAgICAgIC8vIGlmIChoYXNUb2tlbikgewogICAgICAgICAgLy8gICBpZiAodG8ucGF0aCA9PT0gJy9sb2dpbicpIHsKICAgICAgICAgIC8vICAgICAvLyBpZiBpcyBsb2dnZWQgaW4sIHJlZGlyZWN0IHRvIHRoZSBob21lIHBhZ2UKICAgICAgICAgIC8vICAgICBuZXh0KHsgcGF0aDogJy8nIH0pCiAgICAgICAgICAvLyAgICAgTlByb2dyZXNzLmRvbmUoKQogICAgICAgICAgLy8gICB9IGVsc2UgewogICAgICAgICAgLy8gICAgIGNvbnN0IGhhc0dldFVzZXJJbmZvID0gc3RvcmUuZ2V0dGVycy5uYW1lCiAgICAgICAgICAvLyAgICAgaWYgKGhhc0dldFVzZXJJbmZvKSB7CiAgICAgICAgICAvLyAgICAgICBuZXh0KCkKICAgICAgICAgIC8vICAgICB9IGVsc2UgewogICAgICAgICAgLy8gICAgICAgdHJ5IHsKICAgICAgICAgIC8vICAgICAgICAgLy8gZ2V0IHVzZXIgaW5mbwogICAgICAgICAgLy8gICAgICAgICBhd2FpdCBzdG9yZS5kaXNwYXRjaCgndXNlci9nZXRJbmZvJykKCiAgICAgICAgICAvLyAgICAgICAgIG5leHQoKQogICAgICAgICAgLy8gICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIC8vICAgICAgICAgLy8gcmVtb3ZlIHRva2VuIGFuZCBnbyB0byBsb2dpbiBwYWdlIHRvIHJlLWxvZ2luCiAgICAgICAgICAvLyAgICAgICAgIGF3YWl0IHN0b3JlLmRpc3BhdGNoKCd1c2VyL3Jlc2V0VG9rZW4nKQogICAgICAgICAgLy8gICAgICAgICBNZXNzYWdlLmVycm9yKGVycm9yIHx8ICdIYXMgRXJyb3InKQogICAgICAgICAgLy8gICAgICAgICBuZXh0KGAvbG9naW4/cmVkaXJlY3Q9JHt0by5wYXRofWApCiAgICAgICAgICAvLyAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCkKICAgICAgICAgIC8vICAgICAgIH0KICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAvLyAgIH0KICAgICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgICAvLyAgIC8qIGhhcyBubyB0b2tlbiovCgogICAgICAgICAgLy8gICBpZiAod2hpdGVMaXN0LmluZGV4T2YodG8ucGF0aCkgIT09IC0xKSB7CiAgICAgICAgICAvLyAgICAgLy8gaW4gdGhlIGZyZWUgbG9naW4gd2hpdGVsaXN0LCBnbyBkaXJlY3RseQogICAgICAgICAgLy8gICAgIG5leHQoKQogICAgICAgICAgLy8gICB9IGVsc2UgewogICAgICAgICAgLy8gICAgIC8vIG90aGVyIHBhZ2VzIHRoYXQgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgYXJlIHJlZGlyZWN0ZWQgdG8gdGhlIGxvZ2luIHBhZ2UuCiAgICAgICAgICAvLyAgICAgbmV4dChgL2xvZ2luP3JlZGlyZWN0PSR7dG8ucGF0aH1gKQogICAgICAgICAgLy8gICAgIE5Qcm9ncmVzcy5kb25lKCkKICAgICAgICAgIC8vICAgfQogICAgICAgICAgLy8gfQogICAgICAgIGNhc2UgMToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CnJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKCkgewogIC8vIGZpbmlzaCBwcm9ncmVzcyBiYXIKICBOUHJvZ3Jlc3MuZG9uZSgpOwp9KTs="},{"version":3,"names":["router","store","Message","NProgress","getToken","getPageTitle","configure","showSpinner","whiteList","beforeEach","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","to","from","next","wrap","_callee$","_context","prev","stop","_x","_x2","_x3","apply","arguments","afterEach","done"],"sources":["D:/GraduationProject/NPU-DatabaseMigration/vue-new/src/permission.js"],"sourcesContent":["import router from './router'\r\nimport store from './store'\r\nimport { Message } from 'element-ui'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport 'nprogress/nprogress.css' // progress bar style\r\nimport { getToken } from '@/utils/auth' // get token from cookie\r\nimport getPageTitle from '@/utils/get-page-title'\r\n\r\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\r\n\r\nconst whiteList = ['/login'] // no redirect whitelist\r\n\r\nrouter.beforeEach(async(to, from, next) => {\r\n  next()\r\n  // start progress bar\r\n  // NProgress.start()\r\n\r\n  // // set page title\r\n  // document.title = getPageTitle(to.meta.title)\r\n\r\n  // // determine whether the user has logged in\r\n  // const hasToken = getToken()\r\n\r\n  // if (hasToken) {\r\n  //   if (to.path === '/login') {\r\n  //     // if is logged in, redirect to the home page\r\n  //     next({ path: '/' })\r\n  //     NProgress.done()\r\n  //   } else {\r\n  //     const hasGetUserInfo = store.getters.name\r\n  //     if (hasGetUserInfo) {\r\n  //       next()\r\n  //     } else {\r\n  //       try {\r\n  //         // get user info\r\n  //         await store.dispatch('user/getInfo')\r\n\r\n  //         next()\r\n  //       } catch (error) {\r\n  //         // remove token and go to login page to re-login\r\n  //         await store.dispatch('user/resetToken')\r\n  //         Message.error(error || 'Has Error')\r\n  //         next(`/login?redirect=${to.path}`)\r\n  //         NProgress.done()\r\n  //       }\r\n  //     }\r\n  //   }\r\n  // } else {\r\n  //   /* has no token*/\r\n\r\n  //   if (whiteList.indexOf(to.path) !== -1) {\r\n  //     // in the free login whitelist, go directly\r\n  //     next()\r\n  //   } else {\r\n  //     // other pages that do not have permission to access are redirected to the login page.\r\n  //     next(`/login?redirect=${to.path}`)\r\n  //     NProgress.done()\r\n  //   }\r\n  // }\r\n})\r\n\r\nrouter.afterEach(() => {\r\n  // finish progress bar\r\n  NProgress.done()\r\n})\r\n"],"mappings":";;AAAA,OAAOA,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,SAASC,OAAO,QAAQ,YAAY;AACpC,OAAOC,SAAS,MAAM,WAAW,EAAC;AAClC,OAAO,yBAAyB,EAAC;AACjC,SAASC,QAAQ,QAAQ,cAAc,EAAC;AACxC,OAAOC,YAAY,MAAM,wBAAwB;AAEjDF,SAAS,CAACG,SAAS,CAAC;EAAEC,WAAW,EAAE;AAAM,CAAC,CAAC,EAAC;;AAE5C,IAAMC,SAAS,GAAG,CAAC,QAAQ,CAAC,EAAC;;AAE7BR,MAAM,CAACS,UAAU;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAMC,EAAE,EAAEC,IAAI,EAAEC,IAAI;IAAA,OAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAH,IAAA;QAAA;UACpCA,IAAI,CAAC,CAAC;UACN;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QAAA;QAAA;UAAA,OAAAG,QAAA,CAAAE,IAAA;MAAA;IAAA,GAAAR,OAAA;EAAA,CACD;EAAA,iBAAAS,EAAA,EAAAC,GAAA,EAAAC,GAAA;IAAA,OAAAf,IAAA,CAAAgB,KAAA,OAAAC,SAAA;EAAA;AAAA,IAAC;AAEF3B,MAAM,CAAC4B,SAAS,CAAC,YAAM;EACrB;EACAzB,SAAS,CAAC0B,IAAI,CAAC,CAAC;AAClB,CAAC,CAAC"}]}