(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-440d92ca"],{"1bb5":function(e,t,r){"use strict";r("4638")},4638:function(e,t,r){},e7ed:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{attrs:{id:"search"}},[r("el-row",[r("el-col",{attrs:{span:20}},[r("el-input",{attrs:{placeholder:"用户名",clearable:""},model:{value:e.searchModel.username,callback:function(t){e.$set(e.searchModel,"username",t)},expression:"searchModel.username"}}),r("el-input",{attrs:{placeholder:"电话",clearable:""},model:{value:e.searchModel.phone,callback:function(t){e.$set(e.searchModel,"phone",t)},expression:"searchModel.phone"}}),r("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-search"},on:{click:e.getUserList}},[e._v("查询")])],1),r("el-col",{attrs:{span:4,align:"right"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.openEditUI(null)}}})],1)],1)],1),r("el-card",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,stripe:""}},[r("el-table-column",{attrs:{label:"#",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((e.searchModel.pageNo-1)*e.searchModel.pageSize+t.$index+1)+" ")]}}])}),r("el-table-column",{attrs:{prop:"username",label:"用户名",width:"120"}}),r("el-table-column",{attrs:{prop:"phone",label:"电话",width:"180"}}),r("el-table-column",{attrs:{prop:"status",label:"权限",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?r("el-tag",[e._v("管理员")]):r("el-tag",{attrs:{type:"warning"}},[e._v("用户")])]}}])}),r("el-table-column",{attrs:{prop:"email",label:"电子邮件"}}),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(r){return e.openEditUI(t.row.id)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(r){return e.deleteUser(t.row)}}})]}}])})],1)],1),r("el-pagination",{attrs:{"current-page":e.searchModel.pageNo,"page-sizes":[5,10,20,50],"page-size":e.searchModel.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{close:e.clearForm,"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"userFormRef",attrs:{model:e.userForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名",prop:"username","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),null==e.userForm.id||void 0==e.userForm.id?r("el-form-item",{attrs:{label:"登录密码",prop:"password","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off",type:"password"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1):e._e(),r("el-form-item",{attrs:{label:"联系电话","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.userForm.phone,callback:function(t){e.$set(e.userForm,"phone",t)},expression:"userForm.phone"}})],1),r("el-form-item",{attrs:{label:"管理员权限","label-width":e.formLabelWidth}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.userForm.status,callback:function(t){e.$set(e.userForm,"status",t)},expression:"userForm.status"}})],1),r("el-form-item",{attrs:{label:"电子邮件",prop:"email","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v("确 定")])],1)],1)],1)},a=[],o=(r("ac1f"),r("00b4"),r("b775")),l={getUserList:function(e){return Object(o["a"])({url:"/user/list",method:"get",params:{pageNo:e.pageNo,pageSize:e.pageSize,username:e.username,phone:e.phone}})},addUser:function(e){return Object(o["a"])({url:"/user",method:"post",data:e})},getUserById:function(e){return Object(o["a"])({url:"/user/".concat(e),method:"get"})},updateUser:function(e){return Object(o["a"])({url:"/user",method:"put",data:e})},deleteUserById:function(e){return Object(o["a"])({url:"/user/".concat(e),method:"delete"})},saveUser:function(e){return null==e.id&&void 0==e.id?this.addUser(e):this.updateUser(e)}},i={data:function(){var e=function(e,t,r){var s=/^[A-Za-z0-9]+([_\.][A-Za-z0-9]+)*@([A-Za-z0-9\-]+\.)+[A-Za-z]{2,6}$/;if(!s.test(t))return r(new Error("邮箱格式错误"));r()};return{formLabelWidth:"130px",userForm:{},title:"",dialogFormVisible:!1,total:0,searchModel:{pageNo:1,pageSize:10},userList:[],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请设置登录密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮件",trigger:"blur"},{validator:e,trigger:"blur"}]}}},methods:{deleteUser:function(e){var t=this;this.$confirm("您确认删除用户".concat(e.username,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l.deleteUserById(e.id).then((function(e){t.$message({type:"success",message:e.message}),t.getUserList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},saveUser:function(){var e=this;this.$refs.userFormRef.validate((function(t){if(!t)return e.$message.error("添加用户失败"),console.log("error submit!!"),!1;l.saveUser(e.userForm).then((function(t){e.$message({message:t.message,type:"success"}),e.dialogFormVisible=!1,e.getUserList()}))}))},clearForm:function(){this.userForm={},this.$refs.userFormRef.clearValidate()},openEditUI:function(e){var t=this;null==e?this.title="新增用户":(this.title="修改用户",l.getUserById(e).then((function(e){t.userForm=e.data}))),this.dialogFormVisible=!0},handleSizeChange:function(e){this.searchModel.pageSize=e,this.getUserList()},handleCurrentChange:function(e){this.searchModel.pageNo=e,this.getUserList()},getUserList:function(){var e=this;l.getUserList(this.searchModel).then((function(t){e.userList=t.data.rows,e.total=t.data.total}))}},created:function(){this.getUserList()}},n=i,u=(r("1bb5"),r("2877")),c=Object(u["a"])(n,s,a,!1,null,null,null);t["default"]=c.exports}}]);