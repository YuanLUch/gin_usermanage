(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30ddbe7b"],{bfb3:function(e,t,a){"use strict";a.r(t);var s,l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"case-set-management"},[a("el-card",{attrs:{id:"search"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{placeholder:"用例集名",clearable:""},model:{value:e.searchModel.name,callback:function(t){e.$set(e.searchModel,"name",t)},expression:"searchModel.name"}}),a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-search"},on:{click:e.getCaseSetList}},[e._v("查询")])],1),a("el-col",{attrs:{span:4,align:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.handleAdd(null)}}})],1)],1)],1),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.caseSets,stripe:"","row-style":{cursor:"pointer"}},on:{"row-click":e.handleView}},[a("el-table-column",{attrs:{type:"expand"},on:{"row-click":e.handleView},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{staticStyle:{width:"90%"},attrs:{data:e.caseSet,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"用例ID"}}),a("el-table-column",{attrs:{prop:"caseName",label:"用例名称"}}),a("el-table-column",{attrs:{prop:"createdAt",label:"创建时间"}}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",circle:"",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.openEditUI(t.row.id)}}}),a("el-button",{attrs:{type:"danger",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return e.handleDeleteCase(t.row)}}})]}}],null,!0)})],1),a("el-pagination",{attrs:{"current-page":e.searchtable.pageNo,"page-sizes":[5,10,20,50],"page-size":e.searchtable.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total1},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})]}}])}),a("el-table-column",{attrs:{prop:"id",label:"用例集ID",width:"120"}}),a("el-table-column",{attrs:{prop:"name",label:"用例集名称",width:"200"}}),a("el-table-column",{attrs:{prop:"folder",label:"位置",width:"200"}}),a("el-table-column",{attrs:{prop:"createdAt",label:"创建时间",width:"200"}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small",circle:""},on:{click:e.handleAddCase}}),a("el-button",{attrs:{type:"danger",circle:"",size:"small",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}})]}}])})],1),a("el-dialog",{attrs:{visible:e.dialogVisible,title:e.title,"before-close":e.handleCloseDialog,width:"60%",center:"","destroy-on-close":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"newSetForm",attrs:{model:e.newSet,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"用例集ID",prop:"id"}},[a("el-input",{model:{value:e.newSet.id,callback:function(t){e.$set(e.newSet,"id",t)},expression:"newSet.id"}})],1),a("el-form-item",{attrs:{label:"用例集名称",prop:"name"}},[a("el-input",{model:{value:e.newSet.name,callback:function(t){e.$set(e.newSet,"name",t)},expression:"newSet.name"}})],1),a("el-form-item",{attrs:{label:"位置",prop:"folder"}},[a("el-input",{attrs:{placeholder:"请选择文件夹"},model:{value:e.newSet.folder,callback:function(t){e.$set(e.newSet,"folder",t)},expression:"newSet.folder"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-folder-opened"},on:{click:e.openFile},slot:"append"})],1),a("input",{ref:"folderInput",staticStyle:{display:"none"},attrs:{type:"file",webkitdirectory:""},on:{change:function(t){return e.changeFile(t)}}})],1),a("el-form-item",{attrs:{label:"创建时间",prop:"createdAt"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.newSet.createdAt,callback:function(t){e.$set(e.newSet,"createdAt",t)},expression:"newSet.createdAt"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisiblex,title:e.titlex,"before-close":e.handleCloseDialog,width:"60%",center:"","destroy-on-close":!0},on:{"update:visible":function(t){e.dialogVisiblex=t}}},[a("el-form",{ref:"newCaseFormRef",attrs:{model:e.newCaseForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"用例ID",prop:"id"}},[a("el-input",{model:{value:e.newCaseForm.id,callback:function(t){e.$set(e.newCaseForm,"id",t)},expression:"newCaseForm.id"}})],1),a("el-form-item",{attrs:{label:"用例名称",prop:"caseName"}},[a("el-input",{model:{value:e.newCaseForm.caseName,callback:function(t){e.$set(e.newCaseForm,"caseName",t)},expression:"newCaseForm.caseName"}})],1),a("el-form-item",{attrs:{label:"用例集ID",prop:"caseSetId"}},[a("el-input",{model:{value:e.newCaseForm.caseSetId,callback:function(t){e.$set(e.newCaseForm,"caseSetId",t)},expression:"newCaseForm.caseSetId"}})],1),a("el-form-item",{attrs:{label:"创建时间",prop:"createdAt"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.newCaseForm.createdAt,callback:function(t){e.$set(e.newCaseForm,"createdAt",t)},expression:"newCaseForm.createdAt"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisiblex=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSavex}},[e._v("确 定")])],1)],1)],1),a("el-pagination",{attrs:{"current-page":e.searchModel.pageNo,"page-sizes":[5,10,20,50],"page-size":e.searchModel.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],i=a("ade3"),o=(a("b0c0"),a("b775")),c={uploadFolder:function(e){return Object(o["a"])({url:"/sample/uploadFolder",method:"post",data:e})},uploadFiles:function(e){return Object(o["a"])({url:"/sample/uploadFiles",method:"post",data:e})},updateFiles:function(e){return Object(o["a"])({url:"/sample/updateFiles",method:"put",data:e})},getCaseSetList:function(e){return Object(o["a"])({url:"/sample/list",method:"get",params:{pageNo:e.pageNo,pageSize:e.pageSize,name:e.name}})},getCaseList:function(e){return Object(o["a"])({url:"/sample/case-list",method:"get",params:{pageNo:e.pageNo,pageSize:e.pageSize,case_name:e.caseName,case_set_id:e.case_set_id}})},deleteCaseSetById:function(e){return Object(o["a"])({url:"/sample/".concat(e),method:"delete"})},deleteCaseById:function(e){return Object(o["a"])({url:"/sample/case/".concat(e),method:"delete"})},getCaseById:function(e){return Object(o["a"])({url:"/sample/case-info/".concat(e),method:"get"})},saveCase:function(e){return null==e.id&&void 0==e.id?this.uploadFiles(e):this.updateFiles(e)}},r={data:function(){return{newCaseForm:{id:"",caseName:"",caseSetId:"",createdAt:"",updatedAt:""},row:"",dialogVisible:!1,dialogVisiblex:!1,newSet:{id:"",name:"",folder:"",createdAt:"",updatedAt:""},dialogTitle:"",title:"",titlex:"",caseSet:{},total:0,total1:0,searchModel:{pageNo:1,pageSize:10},searchtable:{pageNo:1,pageSize:10,case_set_id:""},caseSets:[],tableCase:{}}},methods:(s={newTask:function(){this.$router.push("/test/task")},openFile:function(){this.$refs.folderInput.click()},changeFile:function(e){var t=e.target.files[0].path;this.newSet.folder=t},getCasesById:function(e){this.getCaseList(e)},openEditUI:function(e){var t=this;null==e?(this.dialogTitle="添加用例集",this.caseSet={name:"",path:"",cases:[]}):(this.title="修改用例",c.getCaseById(e).then((function(e){t.newCaseForm=e.data}))),this.dialogVisiblex=!0},handleSizeChange:function(e){this.searchModel.pageSize=e,this.getCaseSetList(),this.getCaseList()},handleCurrentChange:function(e){this.searchModel.pageNo=e,this.getCaseSetList(),this.getCaseList()},getCaseList:function(e){var t=this;null!=e&&(this.getCaseSetList(),this.searchtable.case_set_id=e),c.getCaseList(this.searchtable).then((function(e){t.caseSet=e.data.rows,t.total1=e.data.total}))},getCaseSetList:function(){var e=this;c.getCaseSetList(this.searchModel).then((function(t){e.caseSets=t.data.rows,e.total=t.data.total}))}},Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(s,"handleSizeChange",(function(e){this.searchModel.pageSize=e,this.getCaseSetList(),this.getCaseList()})),"handleCurrentChange",(function(e){this.searchModel.pageNo=e,this.getCaseSetList(),this.getCaseList()})),"addCase",(function(){this.dialogTitle="添加用例"})),"handleAdd",(function(){this.dialogTitle="添加用例集合",this.caseSet={id:"",name:"",path:"",cases:[]},this.dialogVisible=!0})),"handleAddCase",(function(){this.dialogTitlex="添加用例",this.dialogVisiblex=!0})),"handleDeleteCase",(function(e){var t=this;this.$confirm("您确认删除用例".concat(e.id,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("用例id:",e.id),c.deleteCaseById(e.id).then((function(e){t.$message({type:"success",message:e.message}),t.getCaseSetList(),t.getCaseList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))})),"handleDelete",(function(e){var t=this;this.$confirm("您确认删除用例集".concat(e.id,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("用例集id:",e.id),c.deleteCaseSetById(e.id).then((function(e){t.$message({type:"success",message:e.message}),t.getCaseSetList(),t.getCaseList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))})),"handleView",(function(e){console.log("row::",e),this.getCaseList(e.id)})),"handleSelectFolder",(function(){var e=document.getElementById("open");null!=e&&(this.textarea=e.files[0].name,console.log(e.files[0].name))})),"handleCloseDialog",(function(e){this.$confirm("确认关闭？").then((function(){e()})).catch((function(){}))})),Object(i["a"])(Object(i["a"])(s,"handleSavex",(function(){var e=this;this.$refs.newCaseFormRef.validate((function(t){if(!t)return e.$message.error("添加用例集失败"),console.log("error submit!!"),!1;c.saveCase(e.newCaseForm).then((function(t){e.$message({message:t.message,type:"success"}),e.dialogVisiblex=!1,e.getCaseSetList(),e.getCaseList()}))}))})),"handleSave",(function(){var e=this;this.$refs.newSetForm.validate((function(t){if(!t)return e.$message.error("添加用例集失败"),console.log("error submit!!"),!1;c.uploadFolder(e.newSet).then((function(t){e.$message({message:t.message,type:"success"}),e.dialogVisible=!1,e.getCaseSetList(),e.getCaseList()}))}))}))),created:function(){this.getCaseSetList(),this.getCaseList()}},d=r,u=(a("c1e4"),a("2877")),p=Object(u["a"])(d,l,n,!1,null,null,null);t["default"]=p.exports},c1e4:function(e,t,a){"use strict";a("d9b1")},d9b1:function(e,t,a){}}]);